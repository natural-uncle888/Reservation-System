<!DOCTYPE html>

<html lang="zh-Hant">
<head>
<!-- 新增 favicon -->
<link href="https://res.cloudinary.com/dijzndzw2/image/upload/v1757176751/logo-3_hddq08.png" rel="icon" type="image/png"/>
<!--
    [HEAD：基本設定與 RWD]
    - lang="zh-Hant"：主要語系設為繁體中文，利於 SEO 與輔助工具朗讀。
    - <meta charset="UTF-8">：避免中文亂碼（UTF-8 編碼）。
    - <meta name="viewport">：啟用響應式版面，手機以裝置寬度呈現、初始縮放 1.0。
    - <title>：瀏覽器分頁標題與搜尋結果標題。
  -->
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>預約資料填寫</title>
<style>
    /* =========================================================
       全域／基礎樣式
       - 採用系統字型 Arial，載入快；以柔和灰底提升表單可讀性。
       - 使用 transition 讓深淺色切換更平滑（若有使用主題切換）。
       ========================================================= */
    body {
      font-family: Arial, sans-serif;   /* 全站字型 */
      margin: 0;
      padding: 0;
      background-color: #f5f5f5;        /* 淺灰底（淺色模式） */
      color: #333;                       /* 主文字顏色（淺色模式） */
      transition: background-color 0.3s, color 0.3s; /* 主題切換過場 */
    }

    /* =========================================================
       版芯容器
       - 控制可讀行寬（max-width: 900px），並置中排版。
       ========================================================= */
    .container {
      max-width: 900px;  /* 內容最大寬度 */
      margin: 0 auto;    /* 置中 */
      padding: 20px;     /* 內距 */
    }

    /* =========================================================
       頁面主標題 H1
       - 使用品牌藍強調；文字靠左與表單的閱讀流一致。
       ========================================================= */
    h1 {
      font-size: 1.8em;
      color: #007bff;    /* 品牌藍（淺色模式） */
      margin-bottom: 15px;
      text-align: left;  /* 與表單對齊 */
    }

    /* 導言段落區塊：行距與間距讓說明更好讀 */
    .intro {
      margin-bottom: 20px;
    }
    .intro p {
      margin: 10px 0;
      line-height: 1.6;
    }

    /* =========================================================
       卡片樣式（每個表單段落）
       - 白底卡片 + 淺灰邊框 + 圓角，讓各段落有清楚分隔。
       ========================================================= */
    .card {
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 20px;
    }

    /* 卡片內的標題 H2：使用品牌藍，略小於 H1 */
    .card h2 {
      color: #007bff;
      font-size: 1.4em;
      margin-bottom: 10px;
    }

    /* label：整行可點（包含 input），提升可用性 */
    label {
      display: block;
      margin: 8px 0;
    }

    /* 必填星號樣式（紅色小提醒） */
    .required {
      color: red;
      margin-left: 4px;
    }

    /* checkbox / radio 與文字間距 */
    input[type="checkbox"], input[type="radio"] {
      margin-right: 8px;
    }

    /* =========================================================
       輸入欄位（文字／電話／多行）
       - 滿版寬度、內距、圓角；box-sizing: border-box 避免寬度溢出。
       ========================================================= */
    input[type="text"], input[type="tel"], textarea {
      width: 100%;
      padding: 12px;
      margin-top: 10px;         /* 與前一行 label 保持間距 */
      border: 1px solid #ccc;
      border-radius: 6px;
      box-sizing: border-box;   /* 含內距與邊框 */
    }
    textarea {
      min-height: 100px;        /* 多行區域預設高度 */
      resize: vertical;         /* 僅允許垂直縮放，避免破版 */
    }

    /* =========================================================
       送出按鈕區
       - 置中排列；hover 使用深藍作為回饋。
       ========================================================= */
    .button-container {
      text-align: center;
      margin-top: 30px;
    }
    .btn {
      padding: 10px 20px;
      background-color: #007bff; /* 品牌藍 */
      border: none;
      color: white;
      border-radius: 5px;
      cursor: pointer;
      font-size: 1em;
      margin: 5px;
    }
    .btn:hover {
      background-color: #0056b3; /* hover 深藍 */
    }

    /* =========================================================
       提示框（Toast）
       - 置中浮動，顯示 3 秒後自動關閉並導回首頁。
       - 預設 display: none；JS 控制顯示。
       ========================================================= */
    .toast {
      position: fixed;                      /* 固定在視窗中 */
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);    /* 完整置中 */
      background: #007bff;
      color: #fff;
      padding: 15px 25px;
      border-radius: 8px;
      font-size: 1.1em;
      text-align: center;
      display: none;                        /* 預設隱藏 */
      z-index: 1000;                        /* 浮在最上層 */
    }

    /* =========================================================
       深色模式覆蓋（body.dark-mode）
       - 若有主題切換腳本（例如 theme.js）會切換此 class。
       ========================================================= */
    body.dark-mode {
      background-color: #222; /* 深色背景 */
      color: #fff;            /* 深色文字 */
    }
    body.dark-mode h1 {
      color: #66b3ff;         /* 深色模式下的品牌藍（亮一點） */
    }
    body.dark-mode .card {
      background: #333;
      border: 1px solid #555;
    }
    body.dark-mode .card h2 {
      color: #66b3ff;
    }
    body.dark-mode input[type="text"],
    body.dark-mode input[type="tel"],
    body.dark-mode textarea {
      background: #444;       /* 深色輸入底 */
      color: #fff;            /* 輸入文字色 */
      border: 1px solid #666; /* 深色邊框 */
    }
    body.dark-mode .toast {
      background: #66b3ff;    /* 深色模式提示框底色 */
      color: #000;
    }

    /* =========================================================
       RWD 手機優化
       - 縮小 H1 與按鈕字級，改善小螢幕閱讀與點擊體驗。
       ========================================================= */
    @media (max-width: 600px) {
      h1 { font-size: 1.5em; }
      .btn { font-size: 0.9em; padding: 8px 14px; }
    }
  </style>
</head>
<body>
<!--
    [容器 .container]
    - 包住整個頁面內容：標題、導言、表單、提示框。
  -->
<div class="container">
<!-- 頁面主標題與導言說明 -->
<h1>預約資料填寫說明</h1>
<div class="intro">
<p>此資料僅供預約清洗服務使用，請您詳細填寫以下資訊，以利我們安排最合適的服務時段，謝謝您的配合！</p>
</div>
<!--
      [預約表單 #bookingForm]
      - 本表單不直接送出到伺服器；由 JS 截獲 submit 事件做前端檢核，
        通過後顯示 toast 並導回首頁（index.html）。
      - 若未來要串接後端，將 e.preventDefault() 拿掉或改成 fetch/XHR。
    -->
<form id="bookingForm">
<!-- =====================================================
           區塊 1：預約時段（可複選）
           - 以 checkbox 讓使用者提供可預約時間（平日/假日/上午/下午/皆可）。
           - 「其他指定時間」被勾選時，顯示下方 textarea 供補充。
           ===================================================== -->
<div class="card">
<h2>煩請您告知時段（可複選）<span class="required">*</span></h2>
<!-- 多選時段（同名 name="time" 送出時會有多個值） -->
<label><input name="time" type="checkbox" value="平日"/>平日</label>
<label><input name="time" type="checkbox" value="假日"/>假日</label>
<label><input name="time" type="checkbox" value="上午"/>上午</label>
<label><input name="time" type="checkbox" value="下午"/>下午</label>
<label><input name="time" type="checkbox" value="皆可"/>皆可</label>
<!-- 其他指定時間（勾選後展開輸入框） -->
<label><input id="otherTime" name="time" type="checkbox" value="其他指定時間"/>其他指定時間</label>
<!-- 預設隱藏；JS 依勾選狀態顯示/隱藏 -->
<textarea id="otherTimeInput" name="time" placeholder="請輸入您的指定時段" style="display:none;"></textarea>
</div>
<!-- =====================================================
           區塊 2：顧客姓名（必填）
           - 使用 required 交由瀏覽器原生驗證；JS 也會再次檢查。
           ===================================================== -->
<div class="card">
<h2>顧客姓名<span class="required">*</span></h2>
<input id="name" name="name" placeholder="請輸入您的姓名" required="" type="text"/>
</div>
<!-- =====================================================
           區塊 3：聯繫電話（必填）
           - 若要限制格式可加上 pattern，例如台灣手機：pattern="^09\\d{8}$"
           ===================================================== -->
<div class="card">
<h2>聯繫電話<span class="required">*</span></h2>
<input id="phone" name="phone" placeholder="請輸入您的聯絡電話" required="" type="tel"/>
</div>
<!-- =====================================================
           區塊 4：方便聯繫時間（可複選）
           - 另行提供聯繫偏好，以方便安排回電。
           ===================================================== -->
<div class="card">
<h2>方便聯繫時間（可複選）<span class="required">*</span></h2>
<label><input name="contact" type="checkbox" value="平日"/>平日</label>
<label><input name="contact" type="checkbox" value="假日"/>假日</label>
<label><input name="contact" type="checkbox" value="上午"/>上午</label>
<label><input name="contact" type="checkbox" value="下午"/>下午</label>
<label><input name="contact" type="checkbox" value="晚上"/>晚上</label>
<label><input name="contact" type="checkbox" value="皆可"/>皆可</label>
</div>
<!-- =====================================================
           區塊 5：清洗保養地址（必填）
           - 多行輸入以利詳細地址填寫。
           ===================================================== -->
<div class="card">
<h2>清洗保養地址<span class="required">*</span></h2>
<textarea id="address" name="address" placeholder="請輸入完整地址" required=""></textarea>
</div>
<!-- =====================================================
           區塊 6：居住地型態（必選其一）
           - radio 單選；「其他」被勾選時，顯示下方 textarea 供補充。
           ===================================================== -->
<div class="card">
<h2>居住地型態<span class="required">*</span></h2>
<label><input name="houseType" type="radio" value="透天屋"/>透天屋</label>
<label><input name="houseType" type="radio" value="大樓（有電梯）"/>大樓（有電梯）</label>
<label><input name="houseType" type="radio" value="大樓（無電梯）"/>大樓（無電梯）</label>
<label><input id="otherType" name="houseType" type="radio" value="其他"/>其他</label>
<!-- 預設隱藏；JS 依勾選狀態顯示/隱藏 -->
<textarea id="otherTypeInput" name="houseType" placeholder="請輸入居住地型態" style="display:none;"></textarea>
</div>
<!-- =====================================================
           區塊 7：其他備註（選填）
           - 使用者可提供額外資訊（例如：社區管制、寵物、停車等）。
           ===================================================== -->
<div class="card">
<h2>✍️ 其他備註說明（如有特殊需求或補充）</h2>
<textarea name="note" placeholder="請輸入備註"></textarea>
</div>
<!-- 送出按鈕 -->
<div class="button-container">
<button class="btn" type="submit">完成填寫</button>
</div>
</form>
</div>
<!--
    [Toast：提交完成提示]
    - 由 JS 顯示 3 秒再導回首頁（index.html）。
    - 若未來改為送出至後端，可改成在成功回應後再顯示。
  -->
<div class="toast" id="toast">
    感謝您填寫預約資料🙏<br/>我們將盡快與您聯繫，安排最合適的清洗服務時段！
  </div>
<!--
    外部主題腳本（選用）
    - 若 theme.js 內有深淺色切換（為 body 加上/移除 .dark-mode），可保留本引用。
    - 若未使用主題切換，本行可移除，頁面仍可正常運作。
  -->
<script src="theme.js"></script>
<script>
    // =========================================================
    // 前端互動腳本
    // - 功能 1：勾選「其他指定時間」時，顯示/隱藏對應輸入框。
    // - 功能 2：勾選「居住地型態：其他」時，顯示/隱藏對應輸入框。
    // - 功能 3：表單提交前的必填檢查；通過後顯示 Toast 並導回首頁。
    // - 安全性：事件在 DOMContentLoaded 後綁定，保證元素已存在。
    // =========================================================
    document.addEventListener("DOMContentLoaded", function () {
      // 1) 取得「其他指定時間」checkbox 與輸入框
      const otherTimeCheckbox = document.getElementById("otherTime");
      const otherTimeInput = document.getElementById("otherTimeInput");

      // 2) 取得「居住地型態：其他」radio 與輸入框
      const otherTypeRadio = document.getElementById("otherType");
      const otherTypeInput = document.getElementById("otherTypeInput");

      // 3) 取得表單與提示框（Toast）
      const form = document.getElementById("bookingForm");
      const toast = document.getElementById("toast");

      // ---------------------------------------------------------
      // 功能 1：顯示/隱藏「其他指定時間」輸入框
      // - 依 checkbox 是否勾選切換 display。
      // - 初次載入亦同步一次（支援返回上一頁仍保有勾選狀態的情境）。
      // ---------------------------------------------------------
      function syncOtherTimeVisibility() {
        // 若 otherTimeCheckbox 存在（避免未來改版時元素不存在報錯）
        if (otherTimeCheckbox && otherTimeInput) {
          otherTimeInput.style.display = otherTimeCheckbox.checked ? "block" : "none";
          if (!otherTimeCheckbox.checked) {
            otherTimeInput.value = ""; // 隱藏時清空，避免送出殘值
          }
        }
      }
      // 綁定事件
      if (otherTimeCheckbox) {
        otherTimeCheckbox.addEventListener("change", syncOtherTimeVisibility);
        syncOtherTimeVisibility(); // 初次同步
      }

      // ---------------------------------------------------------
      // 功能 2：顯示/隱藏「居住地型態：其他」輸入框
      // - 依 radio 是否被選中切換 display。
      // - 注意：其他 radio 被選時，也要隱藏此輸入框。
      // ---------------------------------------------------------
      function syncOtherTypeVisibility() {
        if (!otherTypeInput) return;
        // 檢查 name="houseType" 的目前選中項目
        const checked = document.querySelector('input[name="houseType"]:checked');
        const shouldShow = checked && checked.id === "otherType";
        otherTypeInput.style.display = shouldShow ? "block" : "none";
        if (!shouldShow) {
          otherTypeInput.value = ""; // 隱藏時清空，避免送出殘值
        }
      }
      // 綁定所有 houseType radio 的變更事件
      const houseTypeRadios = document.querySelectorAll('input[name="houseType"]');
      houseTypeRadios.forEach(r => r.addEventListener("change", syncOtherTypeVisibility));
      syncOtherTypeVisibility(); // 初次同步

      // ---------------------------------------------------------
      // 功能 3：提交前檢查
      // - 檢查以下欄位是否完整：
      //   a) 姓名 (#name) 非空
      //   b) 電話 (#phone) 非空（如需格式，可加入正規化檢查）
      //   c) 地址 (#address) 非空
      //   d) 預約時段（至少勾選 1 項）
      //   e) 方便聯繫時間（至少勾選 1 項）
      //   f) 居住地型態（必選其一）
      // - 若未完成，使用 alert 提醒；完成則顯示 toast，3 秒後導回首頁。
      // ---------------------------------------------------------
      form.addEventListener("submit", function (e) {
        e.preventDefault(); // 阻止表單預設提交（改由前端流程處理）

        // 讀取欄位值
        const name = document.getElementById("name").value.trim();
        const phone = document.getElementById("phone").value.trim();
        const address = document.getElementById("address").value.trim();

        // 勾選的時段與聯繫偏好
        const times = document.querySelectorAll("input[name='time']:checked");
        const contacts = document.querySelectorAll("input[name='contact']:checked");

        // 單選的居住地型態
        const houseType = document.querySelector("input[name='houseType']:checked");

        // 必填檢查：任一未通過則中斷
        if (!name || !phone || !address || times.length === 0 || contacts.length === 0 || !houseType) {
          alert("⚠️ 請完整填寫所有必填項目！");
          return;
        }

        // 顯示 Toast 提示（置中浮出）
        toast.style.display = "block";

        // 3 秒後收起 Toast 並導回首頁
        setTimeout(() => {
          toast.style.display = "none";
          // 導回首頁：若未有首頁，可改導向其他頁或移除此行
          window.location.href = "index.html";
        }, 3000);
      });
    });
  </script>
<script>(function () {
  try {
    var p = new URLSearchParams(location.search || '');
    var cm = p.get('contact-method') || '';
    var other = (p.get('other-method') || '').trim();
    var cname = (p.get('contact-name') || '').trim();
    function hidden(name, value) {
      if (!value) return;
      var f = document.forms[0] || document.body;
      var i = document.createElement('input');
      i.type = 'hidden'; i.name = name; i.value = value;
      f.appendChild(i);
    }
    if (cm) {
      if (/\u5176\u4ed6/.test(cm) && other) hidden('contact-method', '其他、' + other);
      else hidden('contact-method', cm);
    }
    if (cname) hidden('contact-name', cname);
  } catch (_) {}
})();</script><script defer="True" src="/js/booking-submit.js?v=8"></script></body>
</html>
