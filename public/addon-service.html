<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#2563eb" />
  <title>加購服務專區</title>
  <link rel="icon" type="image/png" href="https://res.cloudinary.com/dijzndzw2/image/upload/v1757176751/logo-3_hddq08.png" />
  <style>
    :root { --brand:#2563eb; --brand-d:#1e40af; --ink:#111827; --muted:#6b7280; --bg:#ffffff; --card:#f9fafb; --line:#e5e7eb; --capsule-h:52px; --capsule-radius:18px; --capsule-border:2px; }
    .addon-page, .addon-page * { box-sizing: border-box; }
    .addon-page { font-family: "Noto Sans TC", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, sans-serif; color: var(--ink); background: var(--bg); min-height: 100dvh; }
    .addon-page h1, .addon-page h2, .addon-page p, .addon-page ul { margin: 0; }
    .addon-page ul { padding-left: 1.2em; }
    .addon-page a { color: inherit; text-decoration: none; }
    .addon-page button, .addon-page a, .addon-page label { -webkit-tap-highlight-color: transparent; }

    /* container */
    .addon-container { max-width: 900px; margin: 0 auto; padding: 20px; }

    /* hero */
    .addon-hero { margin-bottom: 14px; text-align:left; }
    .addon-hero__title { font-size: 1.6rem; color: var(--brand); font-weight: 800; letter-spacing: .3px; margin-bottom: 6px; }
    .addon-hero__sub { color: var(--muted); font-size: 1.03rem; }

    /* sections */
    .addon-section { border: 1px solid var(--line); border-radius: 16px; background: var(--card); padding: 16px; margin: 14px 0; box-shadow: 0 4px 16px rgba(17,24,39,0.04) }
    .addon-section__title { font-size: 1.12rem; color: var(--brand); font-weight: 700; margin-bottom: 12px; display: flex; gap: 6px; align-items: center; }

    /* capsule option */
    .option-grid{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:10px; align-items:stretch; width:100%; min-width:0}
    @media (max-width:560px){ .option-grid{grid-template-columns:1fr} }
    label.option-card{display:grid; grid-template-columns:24px 1fr; align-items:center; column-gap:10px; padding:10px 14px; min-height:var(--capsule-h); background:#fff; border:var(--capsule-border) solid var(--line); border-radius:var(--capsule-radius); box-shadow:0 2px 8px rgba(0,0,0,.04); font-size:1rem; line-height:1.25; cursor:pointer; user-select:none; width:100%; min-width:0}
    label.option-card:active{border-color:var(--brand)}
    label.option-card.selected{border-color:var(--brand); background:#eef2ff; box-shadow:0 4px 12px rgba(37,99,235,.12)}
    label.option-card input[type="checkbox"]{width:20px; height:20px; margin:0; accent-color:var(--brand)}
    label.option-card span{min-width:0; overflow:hidden; text-overflow:ellipsis; white-space:nowrap}

    /* notes + price */
    .addon-note{ margin:8px 2px 2px; color:var(--muted); font-size:.98rem }
    .addon-price{ color:#dc2626; font-weight:700; font-size:1.05rem; }

    /* contact-like nav */
    .nav { display: flex; gap: 12px; margin-top: 22px; }
    .nav a { flex: 1; text-align: center; padding: 12px 16px; background: var(--brand); color: #fff; border-radius: 10px; text-decoration: none; }
    .nav a:hover { background: #1e40af; }

    /* fab */
    .addon-fab { position: fixed; right: 18px; bottom: 72px; width: 56px; height: 56px; background: var(--brand); color: #fff; border-radius: 50%; box-shadow: 0 2px 12px rgba(37,99,235,.10); display: flex; align-items: center; justify-content: center; font-size: 2rem; z-index: 1010; border: none; }
    .addon-fab:active { background: var(--brand-d); transform: scale(.94); transition: transform .1s ease, background .1s ease; }

    /* misc */
    .addon-page img, .addon-page table, .addon-page input, .addon-page select, .addon-page textarea, .addon-page button { max-width: 100%; }
    .addon-page a:focus-visible, .addon-page input:focus-visible, .addon-page button:focus-visible { outline: 3px solid rgba(37,99,235,.5); outline-offset: 2px; border-radius: 8px; }
  </style>
</head>
<body>
  <main class="addon-page">
    <div class="addon-container">
      <section class="addon-hero" aria-labelledby="page-title">
        <h1 id="page-title" class="addon-hero__title">防霉・消毒｜加購服務專區</h1>
        <p class="addon-hero__sub">為提升清洗效果與環境品質，我們提供以下兩項可選擇加購服務：</p>
      </section>

      <!-- Anti-mold -->
      <section class="addon-section" id="sec-anti-mold" aria-labelledby="sec-anti-mold-title">
        <h2 class="addon-section__title" id="sec-anti-mold-title">🟢 冷氣防霉抗菌處理</h2>
        <div class="option-grid">
          <label class="option-card">
            <input id="anti_mold" name="anti_mold" type="checkbox" value="防霉抗菌處理" />
            <span>需要</span>
          </label>
        </div>
        <div class="addon-note addon-price">每台 300 元，5 台以上每台 250 元</div>
        <ul class="addon-note" aria-label="服務說明">
          <li>奈米級抗菌，無香料、無化學添加，純水性原料</li>
          <li>噴塗鰭片／風鼓／風道，延緩黴菌灰塵附著</li>
        </ul>
      </section>

      <!-- Ozone -->
      <section class="addon-section" id="sec-ozone" aria-labelledby="sec-ozone-title">
        <h2 class="addon-section__title" id="sec-ozone-title">🟢 臭氧空間全面消毒（房間）</h2>
        <div class="option-grid">
          <label class="option-card">
            <input id="ozone" name="ozone" type="checkbox" value="臭氧空間消毒" />
            <span>需要</span>
          </label>
        </div>
        <div class="addon-note addon-price">每間房間 200 元</div>
        <ul class="addon-note" aria-label="服務說明">
          <li>去除黴菌／異味，降低過敏源</li>
          <li>減少異味、家具等釋放污染物</li>
          <li>臭氧殺菌力為氯的 3000 倍，能有效達到深層消毒！</li>
        </ul>
      </section>

      <!-- contact-like nav -->
      <div class="nav">
        <a href="ac-booking.html" id="back">返回上一步</a>
        <a href="other-service.html" id="next">下一步</a>
      </div>
    </div>

    <a class="addon-fab" aria-label="回首頁" href="index.html">🏠</a>
  </main>

  <script>
    (function () {
      const KEY = 'BOOKING_DATA';
      const $ = (s) => document.querySelector(s);
      function collect() {
        const out = {};
        const anti = $('#anti_mold'); if (anti && anti.checked) out.anti_mold = anti.value;
        const oz = $('#ozone'); if (oz && oz.checked) out.ozone = oz.value;
        return out;
      }
      function save(part) {
        try {
          const prev = JSON.parse(localStorage.getItem(KEY) || '{}');
          localStorage.setItem(KEY, JSON.stringify(Object.assign(prev, part)));
        } catch (e) {}
      }
      // capsule selected state
      (function(){
        document.querySelectorAll('.option-grid input[type="checkbox"]').forEach(function(input){
          function refresh(){
            const card = input.closest('label.option-card');
            if(!card) return;
            if(input.checked) card.classList.add('selected');
            else card.classList.remove('selected');
          }
          input.addEventListener('change', refresh);
          refresh();
        });
      })();
      // save on change and before leaving via nav
      document.addEventListener('change', () => save(collect()));
      ['back','next'].forEach((id) => {
        const a = document.getElementById(id);
        if (!a) return;
        a.addEventListener('click', () => save(collect()), { capture: true });
      });
      // debug helpers
      window.debugAddon = () => collect();
      window.debugLS = () => JSON.parse(localStorage.getItem(KEY) || '{}');
    })();
  </script>
</body>
</html>
