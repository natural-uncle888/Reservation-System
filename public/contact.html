<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="theme-color" content="#2563eb"/>
<title>è¯ç¹«åç¨±èªªæ˜</title>
<link rel="icon" type="image/png" href="https://res.cloudinary.com/dijzndzw2/image/upload/v1757176751/logo-3_hddq08.png"/>

<!-- å®Œå…¨ç¨ç«‹æ¨£å¼ï¼šä¸ä¾è³´å¤–éƒ¨ CSSï¼Œä¸å— mobile-2col.css å½±éŸ¿ -->
<style>
  :root{
    --brand:#2563eb; --brand-700:#1e40af;
    --ink:#111827; --muted:#6b7280; --line:#e5e7eb; --card:#f9fafb;
    --field-font:16px; --capsule-h:52px; --capsule-radius:18px; --capsule-border:2px;
  }
  html,body{height:100%}
  body{
    font-family:"Noto Sans TC",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Arial,sans-serif;
    margin:0; color:var(--ink); background:#fff; font-size:16px; line-height:1.6;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }
  .wrap{max-width:960px;margin:0 auto;padding:20px 16px}
  h1{margin:0 0 8px;color:var(--brand)}
  .section{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:16px;margin:16px 0}
  .section h2{margin:0 0 10px;color:var(--brand);font-size:1.15rem}
  .row{display:grid;grid-template-columns:minmax(0,1.2fr) minmax(0,1.8fr);gap:12px;align-items:flex-start;margin:10px 0}
  .label-col{font-weight:500;color:var(--ink);padding-top:6px}
  .hint{color:var(--muted);font-size:0.85rem;margin-top:4px}
  .required{color:#dc2626;font-size:0.9rem;margin-left:4px}
  .badge{display:inline-flex;align-items:center;gap:4px;font-size:0.8rem;padding:2px 6px;border-radius:999px;background:#dbeafe;color:#1d4ed8;margin-left:4px}
  .badge svg{width:12px;height:12px}

  .field-group{display:flex;flex-direction:column;gap:6px}
  .capsules{display:flex;flex-wrap:wrap;gap:8px}
  .capsule-label{
    display:inline-flex;align-items:center;gap:8px;
    padding:10px 12px;border-radius:var(--capsule-radius);
    border:var(--capsule-border) solid #d1d5db;background:#fff;
    cursor:pointer;font-size:0.92rem;min-height:var(--capsule-h);
    transition:.15s border-color,.15s box-shadow,.15s background-color,.15s transform;
  }
  .capsule-label input{appearance:none;width:18px;height:18px;border-radius:999px;border:2px solid #9ca3af;display:inline-block;position:relative}
  .capsule-label input::after{
    content:"";position:absolute;inset:3px;border-radius:999px;background:transparent;
  }
  /* è®“æœ‰é¸å–æ™‚é¡¯ç¤ºå¯¦å¿ƒåœˆåœˆ */
  .capsule-label input:checked{
    border-color: var(--brand);
  }
  .capsule-label input:checked::after{
    background: var(--brand);
  }
  .capsule-label strong{font-weight:600}
  .capsule-label span.sub{display:block;font-size:0.8rem;color:var(--muted)}
  .capsule-label.selected{
    border-color:var(--brand);background:#eff6ff;
    box-shadow:0 0 0 1px rgba(37,99,235,.2);
    transform:translateY(-1px);
  }
  .capsule-label.selected input{border-color:var(--brand);}
  .capsule-label.selected input::after{background:var(--brand)}
  .capsule-label:hover{border-color:var(--brand-700)}

  .other-input-wrap{display:none;margin-top:8px}
  .other-input-wrap.show{display:block}

  .multi-line-group{display:flex;flex-direction:column;gap:8px}
  .multi-line-group label{font-size:0.9rem;color:var(--ink)}
  .multi-line-group .inline{display:flex;gap:8px;flex-wrap:wrap}
  .multi-line-group .inline > *{flex:1 1 160px}

  .note-box{
    border-radius:10px;border:1px dashed #93c5fd;background:#eff6ff;
    padding:10px 12px;color:#1d4ed8;font-size:0.86rem;margin-top:6px;
  }
  .note-box strong{font-weight:600}

  
  .nav{
    display:flex;
    gap:12px;
    margin:18px 0;
  }
  .nav a{
    flex:1;
    text-align:center;
    padding:12px 16px;
    background:var(--brand);
    color:#fff;
    border-radius:10px;
    text-decoration:none;
    font-weight:600;
    font-size:0.95rem;
  }
  .nav a:hover{
    background:var(--brand-700);
  }


  .fab-home{
    position:fixed;right:16px;bottom:16px;
    width:48px;height:48px;border-radius:999px;
    display:flex;align-items:center;justify-content:center;
    box-shadow:0 10px 20px rgba(0,0,0,.18);
    text-decoration:none;font-size:24px;
    background:var(--brand);color:#fff;
  }

  details.hint-block{margin-top:8px}
  summary{cursor:pointer;font-size:0.9rem;color:var(--brand-700)}
  details[open] summary{margin-bottom:4px}
  details ul{margin:4px 0 0 1.2em;padding:0;font-size:0.9rem;color:var(--muted)}
  details li{margin:2px 0}

  @media (max-width: 720px){
    .row{grid-template-columns:1fr;gap:4px}
  }
  @media (max-width: 520px){ .row{grid-template-columns:1fr;gap:6px} }

  /* åŸºæœ¬æ–‡å­—è¼¸å…¥é«”é©—ä¸€è‡´åŒ– */
  input[type="text"],input[type="tel"],textarea,select,.other-input{
    padding:12px 12px;border:1.5px solid #d1d5db;border-radius:10px;width:100%;max-width:640px;
    font-size:var(--field-font);line-height:1.5;box-sizing:border-box;
  }
  input::placeholder,textarea::placeholder{color:#9ca3af}

  /* === è† å›Šé›™æ¬„å¡ç‰‡ï¼ˆæ¡Œæ©Ÿèˆ‡æ‰‹æ©Ÿéƒ½ 2 æ¬„ï¼‰ === */
  .option-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;align-items:stretch}
  .option-grid > label.option-card{
    display:grid; grid-template-columns:24px 1fr; align-items:center; column-gap:10px;
    padding:10px 14px; min-height:var(--capsule-h);
    background:#fff; border:var(--capsule-border) solid #d1d5db; border-radius:14px;
    cursor:pointer; font-size:0.92rem;
    transition:.15s border-color,.15s box-shadow,.15s background-color,.15s transform;
  }
  .option-grid > label.option-card input{
    width:18px;height:18px;appearance:none;border-radius:999px;border:2px solid #9ca3af;position:relative;
  }
  .option-grid > label.option-card input::after{
    content:"";position:absolute;inset:3px;border-radius:999px;background:transparent;
  }
  .option-grid > label.option-card .main{font-weight:600}
  .option-grid > label.option-card .sub{font-size:0.8rem;color:var(--muted);margin-top:2px}
  .option-grid > label.option-card.selected{
    border-color:var(--brand);background:#eff6ff;
    box-shadow:0 0 0 1px rgba(37,99,235,.18);
    transform:translateY(-1px);
  }
  .option-grid > label.option-card.selected input{border-color:var(--brand)}
  .option-grid > label.option-card.selected input::after{background:var(--brand)}
  .option-grid > label.option-card:hover{border-color:var(--brand-700)}

  .section-title-row{
    display:flex;justify-content:space-between;align-items:center;gap:8px;margin-bottom:4px;
  }
  .section-title-row .title-main{display:flex;align-items:center;gap:6px}
  .section-title-row .title-sub{font-size:0.86rem;color:var(--muted)}

    /* ===== å…±ç”¨ï¼šé ç´„æµç¨‹æ­¥é©ŸæŒ‡ç¤º ===== */
    .step-flow {
      border-radius: 999px;
      border: 1px solid var(--line, #e5e7eb);
      background: var(--card, #f9fafb);
      margin: 12px auto 8px;
      padding: 6px 10px;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
    }
    .step-flow-inner {
      display: flex;
      align-items: center;
      gap: 8px;
      min-width: max-content;
      font-size: 0.85rem;
      color: var(--muted, #6b7280);
    }
    .step-item {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
      flex-shrink: 0;
    }
    .step-index {
      width: 22px;
      height: 22px;
      border-radius: 999px;
      border: 2px solid var(--muted, #9ca3af);
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: 600;
      background: #ffffff;
      color: var(--muted, #6b7280);
    }
    .step-label {
      letter-spacing: 0.02em;
    }
    .step-divider {
      flex-shrink: 0;
      width: 20px;
      height: 1px;
      background: var(--line, #e5e7eb);
      opacity: 0.9;
    }
    .step-item.is-current .step-index {
      border-color: var(--brand, #2563eb);
      background: var(--brand, #2563eb);
      color: #ffffff;
    }
    .step-item.is-current .step-label {
      color: var(--brand, #2563eb);
      font-weight: 600;
    }
    @media (max-width: 480px) {
      .step-flow {
        border-radius: 14px;
        padding: 6px 8px;
      }
      .step-flow-inner {
        font-size: 0.8rem;
      }
      .step-label {
        letter-spacing: 0;
      }
    }

  
    /* Desktop èª¿æ•´ï¼šè®“æµç¨‹æŒ‡ç¤ºæ›´ç²¾ç°¡ã€ç½®ä¸­ */
    @media (min-width: 900px) {
      .step-flow {
        max-width: 760px;
        padding: 4px 12px 10px;
        margin-top: 16px;
        margin-bottom: 12px;
        background: transparent;
        border-color: transparent;
      }
      .step-flow-inner {
        justify-content: center;
        gap: 16px;
      }
      .step-index {
        width: 20px;
        height: 20px;
        font-size: 0.7rem;
      }
      .step-label {
        font-size: 0.85rem;
      }
      .step-divider {
        width: 28px;
        opacity: 0.4;
      }
    }

  
/* === å…±ç”¨ï¼šå¿…å¡«éŒ¯èª¤å½ˆçª— + æ¬„ä½é«˜äº® === */
.validation-backdrop{
  position:fixed;
  inset:0;
  background:rgba(15,23,42,0.55);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:2000;
  opacity:0;
  pointer-events:none;
  transition:opacity .18s ease-out;
}
.validation-backdrop.is-active{
  opacity:1;
  pointer-events:auto;
}
.validation-modal{
  max-width:320px;
  width:90%;
  background:#ffffff;
  border-radius:16px;
  padding:18px 20px 16px;
  box-shadow:0 24px 60px rgba(15,23,42,0.45);
  font-family:inherit;
}
.validation-title{
  font-size:1.05rem;
  font-weight:700;
  color:var(--brand,#2563eb);
  margin-bottom:4px;
}
.validation-message{
  font-size:.95rem;
  line-height:1.6;
  color:var(--ink,#111827);
  margin-bottom:12px;
}
.validation-btn{
  width:100%;
  border:none;
  border-radius:999px;
  height:40px;
  font-size:.95rem;
  font-weight:600;
  cursor:pointer;
  background:var(--brand,#2563eb);
  color:#ffffff;
}
.validation-btn:hover{
  background:var(--brand-700,#1e40af);
}
.field-error-highlight{
  box-shadow:0 0 0 2px rgba(239,68,68,0.7);
  border-radius:14px;
  transition:box-shadow .25s ease-out, transform .25s ease-out;
  transform:translateY(-1px);
}
</style>

  <script src="validation-dialog.js"></script>
</head>
<body>
<div class="wrap">
  <header>
    <h1>è¯ç¹«è³‡æ–™èˆ‡åå¥½</h1>
    <p style="margin:4px 0 0;color:#4b5563;font-size:0.95rem;">
      è«‹ç•™ä¸‹æ–¹ä¾¿èˆ‡æ‚¨è¯ç¹«çš„æ–¹å¼èˆ‡æ™‚é–“ï¼Œæˆ‘å€‘æœƒå…ˆä»¥ã€Œæ–‡å­—ã€èˆ‡æ‚¨ç¢ºèªç´°ç¯€ï¼Œä¸æœƒç›´æ¥æ’¥æ‰“é›»è©±æ‰“æ“¾æ‚¨ã€‚
    </p>
  </header>
    <div class="step-flow" aria-label="é ç´„æµç¨‹æ­¥é©Ÿ">
      <div class="step-flow-inner">
        <div class="step-item">
          <span class="step-index">1</span>
          <span class="step-label">é¸æ“‡æœå‹™å…§å®¹</span>
        </div>
        <div class="step-divider" aria-hidden="true"></div>
        <div class="step-item">
          <span class="step-index">2</span>
          <span class="step-label">åŠ è³¼æœå‹™ï¼ˆè‹¥é©ç”¨ï¼‰</span>
        </div>
        <div class="step-divider" aria-hidden="true"></div>
        <div class="step-item is-current">
          <span class="step-index">3</span>
          <span class="step-label">è¯ç¹«è³‡æ–™èˆ‡åå¥½</span>
        </div>
        <div class="step-divider" aria-hidden="true"></div>
        <div class="step-item">
          <span class="step-index">4</span>
          <span class="step-label">å®‰æ’æ™‚æ®µèˆ‡é€å‡º</span>
        </div>
      </div>
    </div>


  <!-- å€å¡Šä¸€ï¼šè¯ç¹«æ–¹å¼ -->
  <section class="section">
    <div class="section-title-row">
      <div class="title-main">
        <h2 style="margin:0;">èˆ‡æˆ‘å€‘è¯ç¹«æ–¹å¼</h2>
        <span class="required">ï¼Šå¿…å¡«</span>
        <span class="badge">
          <svg viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2Zm.75 15h-1.5v-1.5h1.5Zm0-3.75h-1.5v-6h1.5Z"/></svg>
          æœƒå…ˆä»¥æ–‡å­—è¯ç¹«
        </span>
      </div>
      <div class="title-sub">è‹¥æ‚¨åå¥½é›»è©±ï¼Œä¹Ÿæœƒå…ˆä»¥ç°¡è¨Šæˆ–é€šè¨Šè»Ÿé«”è©¢å•æ–¹ä¾¿é€šè©±æ™‚é–“</div>
    </div>

    <div class="row">
      <div class="label-col">
        é¸æ“‡ä¸€ç¨®æ‚¨æœ€æ–¹ä¾¿çš„è¯ç¹«æ–¹å¼
      </div>
      <div class="field-group">
        <div class="capsules">
          <label class="capsule-label">
            <input type="radio" name="contact_method" value="LINE"/>
            <div>
              <strong>LINE</strong>
              <span class="sub">æœ€æ¨è–¦ï¼å¯å‚³ç…§ç‰‡ã€å½±ç‰‡æ–¹ä¾¿æºé€šç’°å¢ƒèˆ‡ç´°ç¯€</span>
            </div>
          </label>
          <label class="capsule-label">
            <input type="radio" name="contact_method" value="Facebook"/>
            <div>
              <strong>Facebook / Messenger</strong>
              <span class="sub">ä¹Ÿå¯ä»¥å‚³ç…§ç‰‡ã€å½±ç‰‡ï¼Œé©åˆå¹³å¸¸å¸¸ç”¨ FB çš„å®¢æˆ¶</span>
            </div>
          </label>
          <label class="capsule-label">
            <input type="radio" name="contact_method" value="Phone"/>
            <div>
              <strong>é›»è©±ç‚ºä¸»</strong>
              <span class="sub">æˆ‘å€‘æœƒå…ˆä»¥ç°¡è¨Šæˆ–é€šè¨Šè»Ÿé«”é ç´„æ–¹ä¾¿é€šè©±æ™‚é–“</span>
            </div>
          </label>
          <label class="capsule-label">
            <input type="radio" name="contact_method" value="Other"/>
            <div>
              <strong>å…¶ä»–</strong>
              <span class="sub">ä¾‹å¦‚ï¼šEmailã€IGã€å…¬å¸å…§ç·šâ€¦ç­‰</span>
            </div>
          </label>
        </div>

        <div class="multi-line-group">
          <label>
            è‹¥æ‚¨å‹¾é¸ LINE / Facebookï¼Œè«‹å¡«å¯«æ‚¨çš„é¡¯ç¤ºåç¨±æˆ–å¸³è™Ÿ
          </label>
          <input type="text" name="social_name" placeholder="ä¾‹ï¼šå°æ˜ã€Ming Chenã€LINE IDã€FB åç¨±ç­‰"/>

          <label style="margin-top:6px;">
            è‹¥æ‚¨å‹¾é¸ã€Œå…¶ä»–ã€æˆ–å¸Œæœ›ä»¥ç‰¹å®šæ–¹å¼è¯ç¹«ï¼Œä¹Ÿå¯ä»¥è£œå……èªªæ˜
          </label>
          <textarea name="other_contact_detail" rows="2" placeholder="ä¾‹ï¼šè«‹æ”¹ç”¨ Email è¯ç¹«ï¼›æˆ‘æ¯”è¼ƒå¸¸çœ‹ IG è¨Šæ¯ç­‰"></textarea>
        </div>

        <div class="note-box">
          <strong>å°æé†’ï¼š</strong>æˆ‘å€‘ä¸æœƒåœ¨æœªç¶“åŒæ„çš„æƒ…æ³ä¸‹åŠ æ‚¨ç§äººå¸³è™Ÿï¼Œæœƒä»¥å®˜æ–¹å¸³è™Ÿæˆ–ç°¡è¨Šèˆ‡æ‚¨è¯ç¹«ï¼Œä¸¦åªç”¨æ–¼é€™æ¬¡é ç´„ä½¿ç”¨ã€‚
        </div>
      </div>
    </div>
  </section>

  <!-- å€å¡ŠäºŒï¼šé¡§å®¢åŸºæœ¬è³‡è¨Š -->
  <section class="section">
    <div class="section-title-row">
      <div class="title-main">
        <h2 style="margin:0;">é¡§å®¢èˆ‡è¯ç¹«è³‡è¨Š</h2>
        <span class="required">ï¼Šå¿…å¡«</span>
      </div>
      <div class="title-sub">é€™äº›è³‡è¨Šåƒ…ç”¨æ–¼è¯ç¹«èˆ‡å®‰æ’æ¸…æ´—ï¼Œçµ•ä¸å¤–æµæˆ–åšå…¶ä»–ç”¨é€”</div>
    </div>

    <div class="row">
      <div class="label-col">é¡§å®¢å§“å <span class="required">å¿…å¡«</span></div>
      <div class="field-group">
        <input type="text" name="name" placeholder="ä¾‹ï¼šç‹å°æ˜"/>
      </div>
    </div>

    <div class="row">
      <div class="label-col">è¯ç¹«é›»è©± <span class="required">å¿…å¡«</span></div>
      <div class="field-group">
        <input type="tel" name="phone" placeholder="è«‹å¡«å¯« 09 é–‹é ­æ‰‹æ©Ÿæˆ–å¸‚è©±"/>
        <p class="hint">è‹¥å¸Œæœ›åªä»¥æ–‡å­—è¯ç¹«ï¼Œä¹Ÿè«‹å…ˆç•™é›»è©±ï¼Œå¿…è¦æ™‚ï¼ˆå¦‚ç·Šæ€¥ã€è‡¨æ™‚ç‹€æ³ï¼‰å¯è¯çµ¡å¾—åˆ°æ‚¨ã€‚</p>
      </div>
    </div>

    <div class="row">
      <div class="label-col">æ¸…æ´—ä¿é¤Šåœ°å€ <span class="required">å¿…å¡«</span></div>
      <div class="field-group">
        <input type="text" name="address" placeholder="è«‹å¡«å¯«å®Œæ•´åœ°å€ï¼ˆå«ç¸£å¸‚ã€å€ï¼‰"/>
        <p class="hint">è‹¥æ˜¯ç¤¾å€å¤§æ¨“ï¼Œä¹‹å¾Œå¯åœ¨å‚™è¨»è£œå……ç¤¾å€åç¨±ã€æ£Ÿåˆ¥èˆ‡ç®¡ç†æ–¹å¼ï¼šæœ‰ç„¡è­¦è¡›ã€è¨ªå®¢åœè»Šç­‰ã€‚</p>
      </div>
    </div>

    <div class="row">
      <div class="label-col">å±…ä½åœ°å‹æ…‹ <span class="required">å¿…å¡«</span></div>
      <div class="field-group">
        <div class="option-grid">
          <label class="option-card">
            <input type="radio" name="housing_type" value="é›»æ¢¯å¤§æ¨“"/>
            <div>
              <div class="main">é›»æ¢¯å¤§æ¨“</div>
              <div class="sub">æœ‰é›»æ¢¯ï¼Œå¯æ­ä¹˜å·¥å…·èˆ‡è¨­å‚™</div>
            </div>
          </label>
          <label class="option-card">
            <input type="radio" name="housing_type" value="å…¬å¯“ï¼ˆç„¡é›»æ¢¯ï¼‰"/>
            <div>
              <div class="main">å…¬å¯“ï¼ˆç„¡é›»æ¢¯ï¼‰</div>
              <div class="sub">éœ€èµ°æ¨“æ¢¯æ¬é‹å·¥å…·ï¼Œæ¨“å±¤è³‡è¨Šæœƒå½±éŸ¿å®‰æ’æ™‚é–“èˆ‡äººåŠ›</div>
            </div>
          </label>
          <label class="option-card">
            <input type="radio" name="housing_type" value="é€å¤© / åˆ¥å¢…"/>
            <div>
              <div class="main">é€å¤© / åˆ¥å¢…</div>
              <div class="sub">å¦‚æœ‰å¤šå±¤æ¨“ï¼Œä¹‹å¾Œå¯å‚™è¨»ä¸»è¦æ–½å·¥æ¨“å±¤</div>
            </div>
          </label>
          <label class="option-card">
            <input type="radio" name="housing_type" value="å…¶ä»–" data-other-id="other-housing-input"/>
            <div>
              <div class="main">å…¶ä»–ï¼ˆå…¬å¸ã€åº—é¢ã€å» æˆ¿ç­‰ï¼‰</div>
              <div class="sub">è«‹ç°¡å–®èªªæ˜ç©ºé–“å‹æ…‹ï¼Œæ–¹ä¾¿å®‰æ’äººåŠ›</div>
            </div>
          </label>
        </div>
        <div id="other-housing-input" class="other-input-wrap">
          <input type="text" class="other-input" placeholder="ä¾‹ï¼šå…¬å¸è¾¦å…¬å®¤ã€å’–å•¡å»³ã€è¨ºæ‰€ã€å­¸æ ¡æ•™å®¤ç­‰"/>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="label-col">å…¶ä»–è¯ç¹«å‚™è¨»</div>
      <div class="field-group">
        <textarea name="contact_note" rows="3" placeholder="ä¾‹ï¼šè«‹ç›¡é‡åœ¨ç™½å¤©è¯ç¹«ï¼›è‹¥æœªæ¥é›»è©±å¯æ”¹å‚³è¨Šï¼›ç¤¾å€è¨ªå®¢é ˆäº‹å…ˆç™»è¨˜ç­‰ã€‚"></textarea>
      </div>
    </div>
  </section>

  <!-- å€å¡Šä¸‰ï¼šæ–¹ä¾¿è¯ç¹«æ™‚é–“ -->
  <section class="section">
    <div class="section-title-row">
      <div class="title-main">
        <h2 style="margin:0;">æ–¹ä¾¿è¯ç¹«æ™‚é–“ï¼ˆå¯è¤‡é¸ï¼‰</h2>
        <span class="required">ï¼Šå¿…å¡«</span>
      </div>
      <div class="title-sub">æˆ‘å€‘æœƒç›¡é‡åœ¨æ‚¨æ–¹ä¾¿çš„æ™‚æ®µè¯ç¹«ï¼Œè‹¥è‡¨æ™‚æœ‰ç‹€æ³ä¹Ÿæœƒä»¥ç°¡è¨Šæˆ–è¨Šæ¯èªªæ˜</div>
    </div>

    <div class="row">
      <div class="label-col">è«‹å‹¾é¸å¹³å¸¸è¼ƒæ–¹ä¾¿æ¥é›»è©±æˆ–çœ‹è¨Šæ¯çš„æ™‚æ®µ</div>
      <div class="field-group">
        <div class="option-grid">
          <label class="option-card">
            <input type="checkbox" name="contact_time_preference" value="å¹³æ—¥ç™½å¤©"/>
            <div>
              <div class="main">å¹³æ—¥ç™½å¤©</div>
              <div class="sub">ä¾‹ï¼š09:00â€“17:00 ä¸Šç­æ™‚é–“ï¼Œä½†å¯çœ‹è¨Šæ¯</div>
            </div>
          </label>
          <label class="option-card">
            <input type="checkbox" name="contact_time_preference" value="å¹³æ—¥æ™šä¸Š"/>
            <div>
              <div class="main">å¹³æ—¥æ™šä¸Š</div>
              <div class="sub">ä¸‹ç­å¾Œè¼ƒæœ‰ç©ºæ¥é›»è©±æˆ–å›è¦†è¨Šæ¯</div>
            </div>
          </label>
          <label class="option-card">
            <input type="checkbox" name="contact_time_preference" value="å‡æ—¥ç™½å¤©"/>
            <div>
              <div class="main">å‡æ—¥ç™½å¤©</div>
              <div class="sub">é€±å…­ã€é€±æ—¥ç™½å¤©æ™‚æ®µè¼ƒæ–¹ä¾¿</div>
            </div>
          </label>
          <label class="option-card">
            <input type="checkbox" name="contact_time_preference" value="æ™‚é–“çš†å¯"/>
            <div>
              <div class="main">æ™‚é–“çš†å¯</div>
              <div class="sub">åªè¦æœ‰ä¾†é›»æˆ–è¨Šæ¯ï¼Œæœƒç›¡å¿«å›è¦†</div>
            </div>
          </label>
        </div>

        <details class="hint-block">
          <summary>ç‚ºä»€éº¼éœ€è¦äº†è§£æ–¹ä¾¿è¯ç¹«æ™‚é–“ï¼Ÿ</summary>
          <ul>
            <li>è‹¥æ‚¨å¹³æ—¥ç™½å¤©è¼ƒå¿™ï¼Œæˆ‘å€‘æœƒç›¡é‡å®‰æ’åœ¨æ‚¨å‹¾é¸çš„æ™‚æ®µæ‰“é›»è©±æˆ–å‚³è¨Šæ¯ã€‚</li>
            <li>è‹¥æ˜¯ã€Œæ™‚é–“çš†å¯ã€ï¼Œæˆ‘å€‘é€šå¸¸æœƒåœ¨å®Œæˆå‰ä¸€ä½å®¢æˆ¶æœå‹™å¾Œï¼Œæ–¼ä¸‹ä¸€å€‹ç©ºæª”è¯ç¹«æ‚¨ã€‚</li>
            <li>è‡¨æ™‚æœ‰å¤©å€™æˆ–ç‰¹æ®Šç‹€æ³éœ€è¦èª¿æ•´æ™‚é–“æ™‚ï¼Œä¹Ÿæœƒä¾ç…§æ‚¨æä¾›çš„åå¥½å…ˆè¯ç¹«ã€‚</li>
          </ul>
        </details>
      </div>
    </div>
  </section>

  <!-- å°è¦½æŒ‰éˆ• -->
  <div class="nav">
    <a href="other-service.html" id="back">è¿”å›ä¸Šä¸€æ­¥</a>
    <a href="final-booking.html" id="next">ä¸‹ä¸€æ­¥</a>
  </div>
</div>

<script>
  (function(){
    const KEY='BOOKING_DATA';
    const $=s=>document.querySelector(s);
    const $$=s=>Array.prototype.slice.call(document.querySelectorAll(s));

    function save(part){
      try{
        const prev = JSON.parse(localStorage.getItem(KEY)||'{}');
        localStorage.setItem(KEY, JSON.stringify(Object.assign(prev, part)));
      }catch(e){}
    }
    function collect(root=document){
      const out={};
      $$('input[name],select[name],textarea[name]', root).forEach(el=>{
        const n=el.name; if(!n) return;
        if(el.type==='checkbox'){
          if(!el.checked) return;
          (out[n]||(out[n]=[])).push(el.value);
        }else if(el.type==='radio'){
          if(!el.checked) return;
          let v=el.value;
          const oid=el.dataset.otherId;
          if(oid){
            const extra=(document.getElementById(oid)?.value||'').trim();
            if(extra) v = v+'ï¼š'+extra;
          }
          out[n]=v;
        }else{
          const v=(el.value||'').trim();
          if(v) out[n]=v;
        }
      });
      return out;
    }

    // å…¶ä»–è¼¸å…¥æ¡†é¡¯ç¤º/éš±è—æ§åˆ¶ï¼ˆæ”¯æ´å¤šçµ„åˆ¥ï¼‰
    function setupOtherFieldToggle(){
      document.querySelectorAll('input[type="radio"][data-other-id]').forEach(function(radio){
        const targetId = radio.getAttribute('data-other-id');
        const target = document.getElementById(targetId);
        if(!target) return;

        function toggle(){
          // åªåœ¨åŒåç¾¤çµ„ä¸­æœ‰è¢«é¸æ™‚é¡¯ç¤º
          const checkedOther = document.querySelector('input[type="radio"][name="'+radio.name+'"][data-other-id]:checked');
          if(checkedOther){
            target.classList.add('show');
            setTimeout(()=>target.focus(),0);
          }else{
            target.classList.remove('show');
            target.value='';
          }
        }
        // åˆå§‹ç‹€æ…‹èˆ‡äº‹ä»¶
        toggle();
        document.querySelectorAll('input[type="radio"][name="'+radio.name+'"]').forEach(function(r){
          r.addEventListener('change', toggle);
        });
      });
    }

    // è¯ç¹«æ–¹å¼åˆ‡æ›æ™‚ï¼Œæ¸…ç†ä¸åŒæ¬„ä½çš„å…§å®¹
    function setupContactMethodSync(){
      const radios = document.querySelectorAll('input[name="contact_method"]');
      if(!radios.length) return;
      const social = document.querySelector('input[name="social_name"]');
      const otherDetail = document.querySelector('textarea[name="other_contact_detail"]');
      function sync(){
        const checked = document.querySelector('input[name="contact_method"]:checked');
        if(!checked) return;
        const v = checked.value;
        if(v === 'Other'){
          // æ”¹æˆã€Œå…¶ä»–ã€æ™‚ï¼Œè‡ªå‹•æ¸…ç©ºä¸Šæ–¹çš„åç¨±æ¬„ä½
          if(social) social.value = '';
        }else if(v === 'LINE' || v === 'Facebook'){
          // æ”¹æˆ LINE / Facebook æ™‚ï¼Œè‡ªå‹•æ¸…ç©ºä¸‹æ–¹çš„å…¶ä»–è¯ç¹«èªªæ˜
          if(otherDetail) otherDetail.value = '';
        }
        // åŒæ­¥æ›´æ–° localStorageï¼šè¦†å¯«è¯ç¹«æ–¹å¼ï¼Œä¸¦ç¢ºå¯¦ç§»é™¤ä¸å†ä½¿ç”¨çš„æ¬„ä½
        try{
          const prev = JSON.parse(localStorage.getItem(KEY)||'{}');
          prev.contact_method = v;
          if(v === 'Other'){
            delete prev.social_name;
          }else if(v === 'LINE' || v === 'Facebook'){
            delete prev.other_contact_detail;
          }
          localStorage.setItem(KEY, JSON.stringify(prev));
        }catch(e){}
      }
      radios.forEach(r => r.addEventListener('change', sync));
    }


    // å¡ç‰‡é¸ä¸­æ¨£å¼æ§åˆ¶ï¼ˆradio/checkboxï¼‰
    function setupCardSelection(){
      document.querySelectorAll('.option-grid').forEach(function(group){
        group.querySelectorAll('input[type="radio"],input[type="checkbox"]').forEach(function(input){
          function refresh(){
            if(input.type==="radio"){
              group.querySelectorAll('label.option-card').forEach(function(card){
                card.classList.remove('selected');
              });
              const checked = group.querySelector('input[type="radio"]:checked');
              if(checked){ checked.closest('label.option-card')?.classList.add('selected'); }
            }else{
              if(input.checked) input.closest('label.option-card')?.classList.add('selected');
              else input.closest('label.option-card')?.classList.remove('selected');
            }
          }
          input.addEventListener('change', refresh);
          // åˆå§‹ç‹€æ…‹
          if(input.checked) input.closest('label.option-card')?.classList.add('selected');
        });
      });
    }

    // ä¾ç…§ query string æ±ºå®šã€Œè¿”å›ä¸Šä¸€æ­¥ã€é€£çµ
    function setupBackLink(){
      const backLink = document.getElementById('back');
      if(!backLink) return;

      try{
        const params = new URLSearchParams(window.location.search || '');
        const from = params.get('from');
        if(!from) return;

        // å¯ä¾ä¾†æºé é¢èª¿æ•´å°æ‡‰é—œä¿‚
        const backMap = {
          ac: 'other-service-ac-addon.html',
          other: 'other-service.html',
          group: 'group-booking.html',
          bulk: 'bulk-booking.html'
        };

        if(backMap[from]){
          backLink.href = backMap[from];
        }
      }catch(e){
        // è‹¥ç€è¦½å™¨ä¸æ”¯æ´ URLSearchParams æˆ–ç™¼ç”ŸéŒ¯èª¤ï¼Œå°±ç¶­æŒåŸæœ¬ href
      }
    }

    document.addEventListener('change', ()=> save(collect()));
    ['back','next'].forEach(id=>{
      const a=document.getElementById(id);
      if(!a) return;
      a.addEventListener('click', ()=> save(collect()), {capture:true});
    });

    document.addEventListener('DOMContentLoaded', function(){
      setupOtherFieldToggle();
      setupCardSelection();
      setupBackLink();
      setupContactMethodSync();
    });

    // åµéŒ¯è¼”åŠ©
    window.debugContact=()=>collect();
    window.debugLS=()=>JSON.parse(localStorage.getItem(KEY)||'{}');
  })();
</script>
<a class="fab-home" aria-label="å›é¦–é " href="index.html">ğŸ </a>

<script>
  // === å¿…å¡«é©—è­‰ï¼ˆç¾åŒ–å½ˆçª— + è‡ªå‹•æ²å‹•ï¼‰ ===
document.addEventListener('DOMContentLoaded', function () {
  const nextBtn = document.getElementById('next');
  if (!nextBtn) return;

  nextBtn.addEventListener('click', function (e) {
    let valid = true;
    let msg = '';
    let target = null;

    // 1ï¸âƒ£ ã€Œèˆ‡æˆ‘å€‘è¯ç¹«æ–¹å¼ã€å¿…å¡«
    const contactSelected = document.querySelector('input[name="contact_method"]:checked');
    if (!contactSelected) {
      valid = false;
      msg = 'è«‹é¸æ“‡ä¸€å€‹è¯ç¹«æ–¹å¼ï¼ˆLINE / Facebook / é›»è©± / å…¶ä»–ï¼‰';
      const methodAny = document.querySelector('input[name="contact_method"]');
      target = methodAny && methodAny.closest
        ? (methodAny.closest('.section') || methodAny.closest('.field-group') || methodAny)
        : methodAny;
    }

    // 2ï¸âƒ£ è‹¥é¸ LINE / Facebookï¼Œåç¨±å¿…å¡«
    if (valid && contactSelected && (contactSelected.value === 'LINE' || contactSelected.value === 'Facebook')) {
      const socialName = document.querySelector('input[name="social_name"]');
      if (!socialName.value.trim()) {
        valid = false;
        msg = 'è‹¥é¸æ“‡ LINE æˆ– Facebookï¼Œè«‹å¡«å¯«æ‚¨çš„é¡¯ç¤ºåç¨±æˆ–å¸³è™Ÿ';
        target = socialName;
      }
    }

    // 3ï¸âƒ£ é¡§å®¢å§“åå¿…å¡«
    if (valid) {
      const nameField = document.querySelector('input[name="name"]');
      if (!nameField || !nameField.value.trim()) {
        valid = false;
        msg = 'è«‹è¼¸å…¥é¡§å®¢å§“å';
        target = nameField;
      }
    }

    // 4ï¸âƒ£ è¯ç¹«é›»è©±å¿…å¡«
    if (valid) {
      const phoneField = document.querySelector('input[name="phone"]');
      if (!phoneField || !phoneField.value.trim()) {
        valid = false;
        msg = 'è«‹è¼¸å…¥è¯ç¹«é›»è©±';
        target = phoneField;
      }
    }

    // 5ï¸âƒ£ æ¸…æ´—ä¿é¤Šåœ°å€å¿…å¡«
    if (valid) {
      const addressField = document.querySelector('input[name="address"]');
      if (!addressField || !addressField.value.trim()) {
        valid = false;
        msg = 'è«‹è¼¸å…¥æ¸…æ´—ä¿é¤Šåœ°å€';
        target = addressField;
      }
    }

    // 6ï¸âƒ£ å±…ä½åœ°å‹æ…‹å¿…å¡«
    if (valid) {
      const housingSelected = document.querySelector('input[name="housing_type"]:checked');
      if (!housingSelected) {
        valid = false;
        msg = 'è«‹é¸æ“‡å±…ä½åœ°å‹æ…‹';
        const housingAny = document.querySelector('input[name="housing_type"]');
        target = housingAny && housingAny.closest
          ? (housingAny.closest('.section') || housingAny.closest('.field-group') || housingAny)
          : housingAny;
      }
    }

    // 7ï¸âƒ£ æ–¹ä¾¿è¯ç¹«æ™‚é–“å¿…å¡«ï¼ˆè‡³å°‘ä¸€å€‹ï¼‰
    if (valid) {
      const contactTimeChecked = document.querySelectorAll('input[name="contact_time_preference"]:checked');
      if (!contactTimeChecked || contactTimeChecked.length === 0) {
        valid = false;
        msg = 'è«‹è‡³å°‘é¸æ“‡ä¸€å€‹æ–¹ä¾¿è¯ç¹«æ™‚é–“';
        const timeAny = document.querySelector('input[name="contact_time_preference"]');
        target = timeAny && timeAny.closest
          ? (timeAny.closest('.section') || timeAny.closest('.field-group') || timeAny)
          : timeAny;
      }
    }

    if (!valid) {
      e.preventDefault();
      if (window.showValidationDialog) {
        window.showValidationDialog(msg, target || null);
      } else {
        alert(msg);
        if (target && target.scrollIntoView) {
          target.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      }
    }
  });
});
</script>

</body>
</html>
