<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="theme-color" content="#2563eb"/>
<title>è¯ç¹«åç¨±èªªæ˜</title>
<link rel="icon" type="image/png" href="https://res.cloudinary.com/dijzndzw2/image/upload/v1757176751/logo-3_hddq08.png"/>

<!-- å®Œå…¨ç¨ç«‹æ¨£å¼ï¼šä¸ä¾è³´å¤–éƒ¨ CSSï¼Œä¸å— mobile-2col.css å½±éŸ¿ -->
<style>
  :root{
    --brand:#2563eb; --brand-700:#1e40af;
    --ink:#111827; --muted:#6b7280; --line:#e5e7eb; --card:#f9fafb;
    --field-font:16px; --capsule-h:52px; --capsule-radius:18px; --capsule-border:2px;
  }
  html,body{height:100%}
  body{
    font-family:"Noto Sans TC",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Arial,sans-serif;
    margin:0; color:var(--ink); background:#fff; font-size:16px; line-height:1.6;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }
  .wrap{max-width:960px;margin:0 auto;padding:20px 16px}
  h1{margin:0 0 8px;color:var(--brand)}
  .section{background:var(--card);border:1px solid var(--line);border-radius:12px;padding:16px;margin:16px 0}
  .section h2{margin:0 0 10px;color:var(--brand);font-size:1.15rem}
  .row{display:grid;grid-template-columns:140px 1fr;gap:10px;align-items:center}
  @media (max-width: 520px){ .row{grid-template-columns:1fr;gap:6px} }

  /* åŸºæœ¬æ–‡å­—è¼¸å…¥é«”é©—ä¸€è‡´åŒ– */
  input[type="text"],input[type="tel"],textarea,select,.other-input{
    padding:12px 12px;border:1.5px solid #d1d5db;border-radius:10px;width:100%;max-width:640px;
    font-size:var(--field-font);line-height:1.5;box-sizing:border-box;
  }
  input::placeholder,textarea::placeholder{color:#9ca3af}

  /* === è† å›Šé›™æ¬„å¡ç‰‡ï¼ˆæ¡Œæ©Ÿèˆ‡æ‰‹æ©Ÿéƒ½ 2 æ¬„ï¼‰ === */
  .option-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;align-items:stretch}
  .option-grid > label.option-card{
    display:grid; grid-template-columns:24px 1fr; align-items:center; column-gap:10px;
    padding:10px 14px; min-height:var(--capsule-h);
    background:#fff; border:var(--capsule-border) solid var(--line); border-radius:var(--capsule-radius);
    box-shadow:0 2px 8px rgba(0,0,0,.04); font-size:1rem; line-height:1.25;
    cursor:pointer; user-select:none;
  }
  .option-grid > label.option-card:active{background:#eef2ff;border-color:var(--brand)}
  .option-grid > label.option-card.selected{border-color:var(--brand);background:#eef2ff;box-shadow:0 4px 12px rgba(37,99,235,.12)}
  .option-grid > label.option-card input[type="radio"],
  .option-grid > label.option-card input[type="checkbox"]{width:20px;height:20px;margin:0;accent-color:var(--brand)}
  .option-grid > label.option-card span{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
  /* å…¶ä»–è¼¸å…¥æ¡†ï¼šé è¨­éš±è—ï¼Œé¡¯ç¤ºæ™‚è·¨å…©æ¬„ */
  .other-input{display:none}
  .other-input.show{display:block;margin-top:8px;grid-column:1 / -1}

  /* ç¯„ä¾‹åœ–ç‰‡ï¼šæ”¯æ´æ¡Œæ©Ÿèˆ‡æ‰‹æ©Ÿé©ç•¶å°ºå¯¸ */
  .example-img{width:clamp(220px,60vw,460px);height:auto;border:1px solid #d1d5db;border-radius:10px;display:block}
  @media (max-width:520px){.example-img{width:100%}}

  /* å°èˆªæŒ‰éˆ•ä¸€è‡´åŒ–ï¼ˆfinal-booking é¢¨æ ¼ï¼‰ */
  .nav{display:flex;gap:12px;margin-top:22px}
  .nav a{
    flex:1;text-align:center;padding:14px 16px;background:var(--brand);color:#fff;border-radius:12px;
    text-decoration:none;border:1px solid var(--brand);box-shadow:0 1px 6px rgba(37,99,235,.16);
    font-weight:600;transition:background .15s, transform .05s, box-shadow .15s;
  }
  .nav a:hover{background:var(--brand-700)}
  .nav a:active{transform:translateY(1px)}

  /* ä¿éšªï¼šé¿å…ä»»ä½•å¤–éƒ¨æ¨£å¼å¹²æ“¾ï¼ˆè‹¥æ­¤æª”ä»è¢«ä½µå…¥å…¶ä»–å°ˆæ¡ˆï¼‰ */
  /* ä½¿ç”¨ç›¸å°ç²¾æº–é¸æ“‡å™¨èˆ‡å±¬æ€§è¦†å¯« */
  :where(.option-grid){all:revert-layer}
  :where(.option-grid > label.option-card){all:revert-layer}
  /* é‡æ–°å¥—ç”¨æœ¬æª”è¦æ ¼ */
  .option-grid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;align-items:stretch}
  .option-grid > label.option-card{display:grid;grid-template-columns:24px 1fr;align-items:center;column-gap:10px;padding:10px 14px;min-height:var(--capsule-h);background:#fff;border:var(--capsule-border) solid var(--line);border-radius:var(--capsule-radius);box-shadow:0 2px 8px rgba(0,0,0,.04);font-size:1rem;line-height:1.25;cursor:pointer}
  .option-grid > label.option-card.selected{border-color:var(--brand);background:#eef2ff;box-shadow:0 4px 12px rgba(37,99,235,.12)}

/* === final-booking æŒ‰éˆ•ä¸€è‡´åŒ– === */
.nav{ display:flex; gap:12px; max-width:960px; margin:18px auto; padding:0 16px; }
.nav a, .nav button {
  flex:1; text-align:center; padding:12px 16px;
  background:var(--brand); color:#fff;
  border-radius:10px; text-decoration:none; border:none; cursor:pointer;
  font:500 16px/1.5 "Noto Sans TC", system-ui, -apple-system, BlinkMacSystemFont,"Segoe UI",Arial,sans-serif;
  -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
}
.nav a:hover, .nav button:hover{ background: var(--brand-700); }

/* === å¿«é€Ÿå›é¦–é  FAB === */
.fab-home {
  position:fixed; right:18px; bottom:72px; width:54px; height:54px;
  background:var(--brand); color:#fff; border-radius:50%;
  box-shadow:0 2px 12px rgba(37,99,235,0.08);
  display:flex; align-items:center; justify-content:center;
  font-size:2.1em; z-index:1010; text-decoration:none;
  transition: background .13s, transform .13s; border:none;
}
.fab-home:active { background:#1d4ed8; transform:scale(0.92); }
@media (min-width:768px){ .fab-home { display:none; } }


/* === ä¿®æ­£æ¡Œæ©Ÿæ™‚åœ–ç‰‡èˆ‡è¼¸å…¥æ¡†é‡ç–Š === */
@media (min-width: 768px) {
  .row.social-row {
    grid-template-columns: 1fr; /* å–®æ¬„æ’åˆ— */
  }
}

/* === æ¡Œæ©Ÿï¼šç¤¾ç¾¤åç¨±å€æ”¹ç‚ºç›´å‘æ’åˆ—ï¼Œé¿å… Grid é€ æˆé«˜åº¦å¡Œé™· === */
@media (min-width: 768px) {
  .row.social-row {
    display: block;           /* ç›´æ¥ä½¿ç”¨æ¨™æº–æ–‡æµ */
  }
  .row.social-row > * {
    margin-bottom: 10px;      /* å­å…ƒç´ é–“è· */
  }
  .row.social-row input[name="social_name"]{
    max-width: 420px;         /* è¼¸å…¥æ¡†ä¸æœƒéå¯¬ */
  }
}


/* === å¼·åˆ¶ä¿®æ­£ï¼ˆä¸åˆ†è£ç½®ï¼‰===
   é¿å…ä»»ä½•å¤–éƒ¨æ¨£å¼è¦†è“‹ï¼Œä½¿ç”¨æ›´é«˜é¸æ“‡å™¨èˆ‡ !important */
.section .row.social-row {
  display: block !important;      /* ç›´æ¥æ”¹æˆç›´å‘å †ç–Š */
  grid-template-columns: none !important;
  min-height: auto !important;
}
.section .row.social-row > * {
  display: block !important;
  width: 100% !important;
  margin-bottom: 10px !important;
}
.section .row.social-row input[name="social_name"]{
  max-width: 420px !important;
}


/* === æ‰‹æ©Ÿä¿®æ­£ï¼šé¿å…å¤§æ¨“(æœ‰é›»æ¢¯)/(ç„¡é›»æ¢¯) åƒå­— === */
@media (max-width: 520px) {
  .option-grid > label.option-card span {
    white-space: normal !important;  /* å…è¨±æ–‡å­—æ›è¡Œ */
  }
}


/* === æ‰‹æ©Ÿä¿®æ­£ï¼šèªªæ˜æ–‡å­—ç¸®å°ä»¥ç¬¦åˆç•«é¢æ¯”ä¾‹ === */
@media (max-width: 520px) {
  .intro {
    font-size: 14px !important;
    line-height: 1.5 !important;
  }
}


/* === å¿…å¡«æ¨™é¡Œç´…è‰²æ˜Ÿè™Ÿ (çµ±ä¸€èˆ‡ ac-booking) === */
.section h2.req::after {
  content: " *";
  color: #dc2626;
  margin-left: 4px;
  font-weight: 700;
}
/* row å…§çš„å°æ¨™é¡Œè‹¥æ¨™è¨˜ .req ä¹Ÿé¡¯ç¤ºæ˜Ÿè™Ÿ */
.row > .req::after {
  content: " *";
  color: #dc2626;
  margin-left: 4px;
  font-weight: 700;
}

</style>
</head>
<body>
<div class="wrap">
  <h1>è¯ç¹«åç¨±èªªæ˜</h1>
  <div class="intro">
    <p>ç‚ºäº†åŠ å¿«é ç´„èˆ‡è³‡æ–™æ¯”å°é€Ÿåº¦ï¼Œç…©è«‹æ‚¨æä¾›ä¸‹åˆ—è¯ç¹«åç¨±ï¼š</p>
    <p>âœ… ä½¿ç”¨ LINE è¯ç¹«è€…ï¼šè«‹å¡«å¯«æ‚¨çš„ LINE é¡¯ç¤ºåç¨±ï¼ˆéIDï¼‰</p>
    <p>âœ… ä½¿ç”¨ Facebook ç²‰çµ²å°ˆé æˆ–ç§è¨Šè¯ç¹«è€…ï¼šè«‹å¡«å¯«æ‚¨æˆ–ç²‰å°ˆçš„ Facebook åç¨±</p>
    <p>ğŸ“Œ è‹¥æœªæä¾›åç¨±ï¼Œå¯èƒ½å°è‡´æˆ‘å€‘ç„¡æ³•é †åˆ©å°æ‡‰æ‚¨çš„é ç´„ç´€éŒ„ã€‚æ•¬è«‹å”åŠ©å¡«å¯«ï¼Œæ„Ÿè¬æ‚¨çš„é…åˆèˆ‡æ”¯æŒï¼</p>
  </div>

  <div class="section">
    <h2 class="req">èˆ‡æˆ‘å€‘è¯ç¹«æ–¹å¼</h2>
    <div class="option-grid" id="contact-method">
      <label class="option-card"><input type="radio" name="contact_method" value="LINE"/><span>LINE</span></label>
      <label class="option-card"><input type="radio" name="contact_method" value="Facebook"/><span>Facebook</span></label>
      <label class="option-card"><input type="radio" name="contact_method" value="é›»è©±"/><span>é›»è©±</span></label>
      <label class="option-card"><input type="radio" name="contact_method" value="å…¶ä»–" data-other-id="contact_method_other"/><span>å…¶ä»–</span></label>
      <input type="text" class="other-input" id="contact_method_other" name="contact_method_other" placeholder="è«‹è¼¸å…¥å…¶ä»–è¯ç¹«æ–¹å¼"/>
    </div>
    <details><summary>å°æé†’</summary><p>è‹¥åå¥½éé›»è©±è¯ç¹«ï¼Œè«‹åœ¨ä¸‹æ–¹åç¨±è™•æä¾› LINE æˆ– FB åç¨±ã€‚</p></details>
  </div>

  <div class="section">
    <h2 class="req">LINE æˆ– Facebook åç¨±</h2>
    <div class="row social-row" style="align-items:center;">
      <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
        <div>åç¨±</div>
        <img src="imagesexample.jpg" alt="ç¯„ä¾‹åœ–ç‰‡ï¼šå¦‚ä½•æ‰¾åˆ° LINE æˆ– Facebook åç¨±" class="example-img"/>
      </div>
      <input type="text" name="social_name" placeholder="è«‹è¼¸å…¥åç¨±ï¼ˆè‹¥é¸ LINE/FB è«‹å‹™å¿…å¡«å¯«ï¼‰"/>
    </div>
  </div>

  <div class="section">
    <h2 class="req">åŸºæœ¬è³‡æ–™</h2>
    <div class="row">
      <div class="req">é¡§å®¢å§“å</div>
      <input type="text" name="name" placeholder="å§“å"/>
    </div>
    <div class="row">
      <div class="req">è¯ç¹«é›»è©±</div>
      <input type="tel" name="phone" placeholder="æ‰‹æ©Ÿæˆ–å¸‚è©±"/>
    </div>
    <div class="row">
      <div class="req">æ¸…æ´—ä¿é¤Šåœ°å€</div>
      <input type="text" name="address" placeholder="ç¸£å¸‚å€ + è·¯åé–€ç‰Œ"/>
    </div>
    <div class="row">
      <div class="req">å±…ä½åœ°å‹æ…‹</div>
      <div class="option-grid" id="housing-type">
        <label class="option-card"><input type="radio" name="housing_type" value="é€å¤©å±‹"/><span>é€å¤©å±‹</span></label>
        <label class="option-card"><input type="radio" name="housing_type" value="å¤§æ¨“ï¼ˆæœ‰é›»æ¢¯ï¼‰"/><span>å¤§æ¨“ï¼ˆæœ‰é›»æ¢¯ï¼‰</span></label>
        <label class="option-card"><input type="radio" name="housing_type" value="å¤§æ¨“ï¼ˆç„¡é›»æ¢¯ï¼‰"/><span>å¤§æ¨“ï¼ˆç„¡é›»æ¢¯ï¼‰</span></label>
        <label class="option-card"><input type="radio" name="housing_type" value="å…¶ä»–" data-other-id="housing_type_other"/><span>å…¶ä»–</span></label>
        <input type="text" class="other-input" id="housing_type_other" name="housing_type_other" placeholder="è«‹è¼¸å…¥å‹æ…‹"/>
      </div>
    </div>
    <div class="row">
      <div class="req">æ–¹ä¾¿è¯ç¹«æ™‚é–“ï¼ˆå¯è¤‡é¸ï¼‰</div>
      <div class="option-grid" id="contact-time">
        <label class="option-card"><input type="checkbox" name="contact_time_preference" value="å¹³æ—¥"/><span>å¹³æ—¥</span></label>
        <label class="option-card"><input type="checkbox" name="contact_time_preference" value="å‡æ—¥"/><span>å‡æ—¥</span></label>
        <label class="option-card"><input type="checkbox" name="contact_time_preference" value="ä¸Šåˆ"/><span>ä¸Šåˆ</span></label>
        <label class="option-card"><input type="checkbox" name="contact_time_preference" value="ä¸‹åˆ"/><span>ä¸‹åˆ</span></label>
        <label class="option-card"><input type="checkbox" name="contact_time_preference" value="æ™šä¸Š"/><span>æ™šä¸Š</span></label>
        <label class="option-card"><input type="checkbox" name="contact_time_preference" value="çš†å¯"/><span>çš†å¯</span></label>
      </div>
    </div>
    <details><summary>éš±ç§èªªæ˜</summary><p>è¯ç¹«è³‡è¨Šåƒ…ç”¨æ–¼é ç´„æºé€šèˆ‡æ´¾å·¥ï¼Œä¸åšå…¶ä»–ç”¨é€”ã€‚</p></details>
  </div>

  <div class="nav">
    <a href="other-service.html" id="back">è¿”å›ä¸Šä¸€æ­¥</a>
    <a href="final-booking.html" id="next">ä¸‹ä¸€æ­¥</a>
  </div>
</div>

<script>
  (function(){
    const KEY='BOOKING_DATA';
    const $=s=>document.querySelector(s);
    const $$=s=>Array.prototype.slice.call(document.querySelectorAll(s));

    function save(part){
      try{
        const prev = JSON.parse(localStorage.getItem(KEY)||'{}');
        localStorage.setItem(KEY, JSON.stringify(Object.assign(prev, part)));
      }catch(e){}
    }
    function collect(root=document){
      const out={};
      $$('input[name],select[name],textarea[name]', root).forEach(el=>{
        const n=el.name; if(!n) return;
        if(el.type==='checkbox'){
          if(!el.checked) return;
          (out[n]||(out[n]=[])).push(el.value);
        }else if(el.type==='radio'){
          if(!el.checked) return;
          let v=el.value;
          const oid=el.dataset.otherId;
          if(oid){
            const extra=(document.getElementById(oid)?.value||'').trim();
            if(extra) v = v+'ï¼š'+extra;
          }
          out[n]=v;
        }else{
          const v=(el.value||'').trim();
          if(v) out[n]=v;
        }
      });
      return out;
    }

    // å…¶ä»–è¼¸å…¥æ¡†é¡¯ç¤º/éš±è—æ§åˆ¶ï¼ˆæ”¯æ´å¤šçµ„åˆ¥ï¼‰
    function setupOtherFieldToggle(){
      document.querySelectorAll('input[type="radio"][data-other-id]').forEach(function(radio){
        const targetId = radio.getAttribute('data-other-id');
        const target = document.getElementById(targetId);
        if(!target) return;

        function toggle(){
          // åªåœ¨åŒåç¾¤çµ„ä¸­æœ‰è¢«é¸æ™‚é¡¯ç¤º
          const checkedOther = document.querySelector('input[type="radio"][name="'+radio.name+'"][data-other-id]:checked');
          if(checkedOther){
            target.classList.add('show');
            setTimeout(()=>target.focus(),0);
          }else{
            target.classList.remove('show');
            target.value='';
          }
        }
        // åˆå§‹ç‹€æ…‹èˆ‡äº‹ä»¶
        toggle();
        document.querySelectorAll('input[type="radio"][name="'+radio.name+'"]').forEach(function(r){
          r.addEventListener('change', toggle);
        });
      });
    }

    // å¡ç‰‡é¸ä¸­æ¨£å¼æ§åˆ¶ï¼ˆradio/checkboxï¼‰
    function setupCardSelection(){
      document.querySelectorAll('.option-grid').forEach(function(group){
        group.querySelectorAll('input[type="radio"],input[type="checkbox"]').forEach(function(input){
          function refresh(){
            if(input.type==="radio"){
              group.querySelectorAll('label.option-card').forEach(function(card){
                card.classList.remove('selected');
              });
              const checked = group.querySelector('input[type="radio"]:checked');
              if(checked){ checked.closest('label.option-card')?.classList.add('selected'); }
            }else{
              if(input.checked) input.closest('label.option-card')?.classList.add('selected');
              else input.closest('label.option-card')?.classList.remove('selected');
            }
          }
          input.addEventListener('change', refresh);
          // åˆå§‹ç‹€æ…‹
          if(input.checked) input.closest('label.option-card')?.classList.add('selected');
        });
      });
    }

    document.addEventListener('change', ()=> save(collect()));
    ['back','next'].forEach(id=>{
      const a=document.getElementById(id);
      if(!a) return;
      a.addEventListener('click', ()=> save(collect()), {capture:true});
    });

    document.addEventListener('DOMContentLoaded', function(){
      setupOtherFieldToggle();
      setupCardSelection();
    });

    // åµéŒ¯è¼”åŠ©
    window.debugContact=()=>collect();
    window.debugLS=()=>JSON.parse(localStorage.getItem(KEY)||'{}');
  })();
</script>
<a class="fab-home" aria-label="å›é¦–é " href="index.html">ğŸ </a>

<script>
  // === å¿…å¡«é©—è­‰ ===
  document.addEventListener('DOMContentLoaded', function () {
    const nextBtn = document.getElementById('next');

    nextBtn.addEventListener('click', function (e) {
      let valid = true;
      let msg = '';

      // 1ï¸âƒ£ é©—è­‰ã€Œèˆ‡æˆ‘å€‘è¯ç¹«æ–¹å¼ã€å¿…å¡«
      const contactSelected = document.querySelector('input[name="contact_method"]:checked');
      if (!contactSelected) {
        valid = false;
        msg = 'è«‹é¸æ“‡ä¸€å€‹è¯ç¹«æ–¹å¼ï¼ˆLINE / Facebook / é›»è©± / å…¶ä»–ï¼‰';
      }

      // 2ï¸âƒ£ é©—è­‰ã€ŒLINE æˆ– Facebook åç¨±ã€è‹¥é¸ LINE / Facebook æ™‚å¿…å¡«
      if (valid && (contactSelected?.value === 'LINE' || contactSelected?.value === 'Facebook')) {
        const socialName = document.querySelector('input[name="social_name"]');
        if (!socialName.value.trim()) {
          valid = false;
          msg = 'æ‚¨é¸æ“‡äº† ' + contactSelected.value + 'ï¼Œè«‹å¡«å¯«åç¨±';
        }
      }

      // 3ï¸âƒ£ é©—è­‰ã€Œé¡§å®¢å§“åã€å¿…å¡«
      if (valid) {
        const nameField = document.querySelector('input[name="name"]');
        if (!nameField.value.trim()) {
          valid = false;
          msg = 'è«‹è¼¸å…¥é¡§å®¢å§“å';
        }
      }

      // 4ï¸âƒ£ é©—è­‰ã€Œè¯ç¹«é›»è©±ã€å¿…å¡«
      if (valid) {
        const phoneField = document.querySelector('input[name="phone"]');
        if (!phoneField.value.trim()) {
          valid = false;
          msg = 'è«‹è¼¸å…¥è¯ç¹«é›»è©±';
        }
      }

      // 5ï¸âƒ£ é©—è­‰ã€Œæ¸…æ´—ä¿é¤Šåœ°å€ã€å¿…å¡«
      if (valid) {
        const addressField = document.querySelector('input[name="address"]');
        if (!addressField.value.trim()) {
          valid = false;
          msg = 'è«‹è¼¸å…¥æ¸…æ´—ä¿é¤Šåœ°å€';
        }
      }

      // 6ï¸âƒ£ é©—è­‰ã€Œå±…ä½åœ°å‹æ…‹ã€å¿…å¡«
      if (valid) {
        const housingSelected = document.querySelector('input[name="housing_type"]:checked');
        if (!housingSelected) {
          valid = false;
          msg = 'è«‹é¸æ“‡å±…ä½åœ°å‹æ…‹';
        }
      }


      // 7ï¸âƒ£ é©—è­‰ã€Œæ–¹ä¾¿è¯ç¹«æ™‚é–“ã€å¿…å¡«
      if (valid) {
        const contactTimeChecked = document.querySelectorAll('input[name="contact_time_preference"]:checked');
        if (contactTimeChecked.length === 0) {
          valid = false;
          msg = 'è«‹è‡³å°‘é¸æ“‡ä¸€å€‹æ–¹ä¾¿è¯ç¹«æ™‚é–“';
        }
      }
      if (!valid) {
        e.preventDefault(); // é˜»æ­¢è·³è½‰
        alert(msg);
      }
    });
  });
</script>

</body>
</html>
