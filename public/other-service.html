<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<meta name="theme-color" content="#2563eb"/>
<title>其他清洗服務</title>
<link rel="icon" type="image/png" href="https://res.cloudinary.com/dijzndzw2/image/upload/v1757176751/logo-3_hddq08.png"/>

<!-- 完全獨立樣式：不依賴外部 CSS，不受 mobile-2col.css 影響 -->
<style>
  :root{
    --brand:#2563eb; --brand-700:#1e40af;
    --ink:#111827; --muted:#6b7280; --line:#e5e7eb; --card:#f9fafb; --bg:#ffffff;
    --field-font:16px; --capsule-h:52px; --capsule-radius:18px; --capsule-border:2px;
    --wrap-max:960px; --section-max:780px; /* 讓區塊與整頁置中且寬度不與上方文字對齊 */
  }
  html,body{
    font-family:"Noto Sans TC",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Arial,sans-serif;
    margin:0; color:var(--ink); background:var(--bg); font-size:16px; line-height:1.65;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale; overflow-x:hidden;
  }
  body{
    font-family:"Noto Sans TC",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Arial,sans-serif;
    margin:0; color:var(--ink); background:var(--bg); font-size:16px; line-height:1.65;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
  }

  /* ========== 版面結構（整頁置中） ========== */
  .page{min-height:100svh; display:flex; flex-direction:column; align-items:center;}
  .wrap{width:100%; max-width:var(--wrap-max); margin:0 auto; padding:22px clamp(12px,4vw,16px)}

  /* 標題與說明改為置中，與下方區塊寬度錯開（避免左右齊線） */
  .hero{max-width:680px; margin:0 auto 8px; text-align:center;}
  h1{margin:0 0 8px; color:var(--brand); font-weight:700; font-size:2rem; line-height:1.2}
  .desc{margin:0 0 10px; color:var(--muted)}

  .notice{max-width:640px; margin:10px auto 0; background:#fff; border:1px solid var(--line); border-radius:14px; padding:10px 14px; color:var(--ink); width:100%}
  .notice ul{margin:8px 0 0 18px; color:var(--muted)}

  /* ========== 區塊容器（區塊本身置中） ========== */
  .sections{width:100%; display:grid; place-items:center; margin-top:14px}
  .section{ width:100%; max-width:var(--section-max); background:var(--card); border:1px solid var(--line); border-radius:16px; padding:16px; margin:14px auto; box-shadow:0 4px 16px rgba(17,24,39,0.04)}
  .section h2{margin:0 0 12px; color:var(--brand); font-size:1.15rem}
  .subhead{margin:10px 0 6px; font-weight:700; color:var(--ink)}

  /* ========== 膠囊選項（與 contact.html 一致風格） ========== */
  .option-grid{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:10px; align-items:stretch; min-width:0}
  @media (max-width:560px){
  .option-grid{grid-template-columns:1fr; gap:10px}
  .section{padding:14px}
}
@media (max-width:400px){
  :root{ --field-font:15px; --capsule-h:48px }
  .option-grid > label.option-card{display:grid; grid-template-columns:24px 1fr; align-items:center; column-gap:10px; padding:10px 14px; min-height:var(--capsule-h); background:#fff; border:var(--capsule-border) solid var(--line); border-radius:var(--capsule-radius); box-shadow:0 2px 8px rgba(0,0,0,.04); font-size:1rem; line-height:1.25; cursor:pointer; user-select:none; width:100%; min-width:0}
} }
  .option-grid > label.option-card{display:grid; grid-template-columns:24px 1fr; align-items:center; column-gap:10px; padding:10px 14px; min-height:var(--capsule-h); background:#fff; border:var(--capsule-border) solid var(--line); border-radius:var(--capsule-radius); box-shadow:0 2px 8px rgba(0,0,0,.04); font-size:1rem; line-height:1.25; cursor:pointer; user-select:none; width:100%; min-width:0}
  .option-grid > label.option-card:active{border-color:var(--brand)}
  .option-grid > label.option-card.selected{border-color:var(--brand); background:#fff; box-shadow:0 4px 12px rgba(37,99,235,.12)}
  .option-grid > label.option-card input[type="radio"],
  .option-grid > label.option-card input[type="checkbox"]{width:20px; height:20px; margin:0; accent-color:var(--brand)}
  .option-grid > label.option-card span{min-width:0; overflow:hidden; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; line-height:1.35; text-overflow:ellipsis; white-space:normal }

  /* ========== 表單欄位一致化 ========== */
  textarea,input[type="text"],input[type="tel"],select,.other-input{
    padding:12px; border:1.5px solid #d1d5db; border-radius:12px; width:100%; max-width:640px;
    font-size:var(--field-font); line-height:1.5; box-sizing:border-box; background:#fff;
  }
  textarea{ resize:vertical; min-height:88px; }
  input::placeholder,textarea::placeholder{ color:#9ca3af }

  /* 其他原因輸入框：預設隱藏，顯示時跨兩欄且不超出區塊邊框，長度適中 */
  .other-wrap{ margin-top:8px; }
  .other-input{ display:none; }
  .other-input.show{ display:block; max-width:min(640px,100%); }

  /* 區塊內文與清單 */
  ul{ margin:6px 0; color:var(--muted) }

  /* 導覽按鈕（final-booking 一致化） */
  .nav{ display:flex; gap:12px; width:100%; max-width:var(--section-max); margin:18px auto; padding:0 clamp(4px,2vw,8px); }
  .nav a{ flex:1; text-align:center; padding:12px 16px; background:var(--brand); color:#fff; border-radius:12px; text-decoration:none; border:1px solid var(--brand); box-shadow:0 1px 6px rgba(37,99,235,.16); font-weight:600; transition:background .15s, transform .05s, box-shadow .15s; }
  .nav a:hover{ background:var(--brand-700) }
  .nav a:active{ transform:translateY(1px) }

  /* ===== 防干擾（保險）：避免外部 CSS 影響 ===== */
  /* 若此檔被併入有 global reset / mobile-2col.css 的專案，透過層級與重新宣告維持獨立外觀 */
  /* 全域盒模型與溢出保護 */
* , *::before, *::after{ box-sizing:border-box; max-width:100% }
html,body,.page{ width:100%; overflow-x:hidden }

/* option-grid 標準版本（移除 revert-layer 以避免外部 reset 造成寬度溢出） */
.option-grid{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:10px; align-items:stretch; width:100%; min-width:0}
.option-grid > label.option-card{display:grid; grid-template-columns:24px 1fr; align-items:center; column-gap:10px; padding:10px 14px; min-height:var(--capsule-h); background:#fff; border:var(--capsule-border) solid var(--line); border-radius:var(--capsule-radius); box-shadow:0 2px 8px rgba(0,0,0,.04); font-size:1rem; line-height:1.25; cursor:pointer; user-select:none; width:100%; min-width:0}
.option-grid > label.option-card.selected{border-color:var(--brand); background:#eef2ff; box-shadow:0 4px 12px rgba(37,99,235,.12)}

/* 針對文字溢出（條列/段落） */
.notice, .section, .hero, .wrap{ overflow-wrap:anywhere }
</style>

<style>

/* === FAB：快速回首頁 === */
.fab-home{
  position:fixed; z-index:60;
  right:clamp(12px,3vw,16px);
  bottom:calc(env(safe-area-inset-bottom, 0px) + 16px);
  display:inline-flex; align-items:center; gap:10px;
  padding:12px 16px; border-radius:9999px;
  background:var(--brand, #2563eb); color:#fff; text-decoration:none; font-weight:700;
  box-shadow:0 8px 24px rgba(37,99,235,.25), 0 2px 6px rgba(0,0,0,.08);
  border:1px solid var(--brand, #2563eb);
  transition:transform .08s ease, box-shadow .15s ease, background .15s ease;
}
.fab-home:active{ transform:translateY(1px) }
.fab-home:hover{ background:var(--brand-700, #1d4ed8) }
.fab-home__icon{ font-size:18px; line-height:1 }
.fab-home__label{ font-size:15px }

/* 讓頁面底部不被 FAB 擋到（約 88px 高度緩衝） */
.sections{ padding-bottom:88px }
@supports (bottom: env(safe-area-inset-bottom)){
  .sections{ padding-bottom:calc(88px + env(safe-area-inset-bottom, 0px)) }
}

</style>

<style>

/* === FAB 調整：僅手機顯示（<=767px），圓形 54px，底部 72px === */
.fab-home{
  width:54px; height:54px; border-radius:50%;
  display:flex; align-items:center; justify-content:center; font-size:2.1em;
  bottom:72px; right:18px;
}
@media (min-width:768px){ .fab-home{ display:none; } }

</style>
</head>
<body>
<div class="page">
  <div class="wrap">
    <div class="hero">
      <h1>其他清洗服務</h1>
      <p class="desc">以下為非冷氣項目。若僅預約冷氣可直接跳到下一步。</p>
    </div>

    <div class="notice">
      <p>若您同時有預約以下服務，我們將提供額外優惠：</p>
      <ul>
        <li>✅ 直立式洗衣機清洗 ➜ 若同時清洗冷氣，可再折扣 $200 元</li>
        <li>✅ 家用水塔清洗（兩噸內） ➜ 若同時清洗自來水管，可再折扣 $200 元</li>
      </ul>
    </div>

    <div class="sections">

      <!-- 直立式洗衣機清洗 -->
      <div class="section">
        <h2>直立式洗衣機清洗</h2>
        <div class="subhead">清洗台數</div>
        <div class="option-grid">
          <label class="option-card"><input type="radio" name="washer_count" value="1台"/><span>1 台</span></label>
          <label class="option-card"><input type="radio" name="washer_count" value="2台"/><span>2 台</span></label>
          <label class="option-card"><input type="radio" name="washer_count" value="3台"/><span>3 台</span></label>
          <label class="option-card"><input type="radio" name="washer_count" value="4台"/><span>4 台</span></label>
        </div>
        <ul><li>尚無提供滾筒式洗衣機清洗服務。</li></ul>

        <div class="subhead">洗衣機位於樓層（可複選）</div>
        <div class="option-grid">
          <label class="option-card"><input type="checkbox" name="washer_floor" value="1F"/><span>1F</span></label>
          <label class="option-card"><input type="checkbox" name="washer_floor" value="2F"/><span>2F</span></label>
          <label class="option-card"><input type="checkbox" name="washer_floor" value="3F"/><span>3F</span></label>
          <label class="option-card"><input type="checkbox" name="washer_floor" value="4F"/><span>4F</span></label>
          <label class="option-card"><input type="checkbox" name="washer_floor" value="5F"/><span>5F</span></label>
          <label class="option-card"><input type="checkbox" name="washer_floor" value="大樓"/><span>大樓（同樓層）</span></label>
        </div>
      </div>

      <!-- 家用水塔清洗 -->
      <div class="section">
        <h2>家用水塔清洗（兩噸內）</h2>
        <div class="subhead">清洗顆數</div>
        <div class="option-grid">
          <label class="option-card"><input type="radio" name="tank_count" value="1顆"/><span>1 顆</span></label>
          <label class="option-card"><input type="radio" name="tank_count" value="2顆"/><span>2 顆</span></label>
          <label class="option-card"><input type="radio" name="tank_count" value="3顆"/><span>3 顆</span></label>
          <label class="option-card"><input type="radio" name="tank_count" value="4顆"/><span>4 顆</span></label>
          <label class="option-card"><input type="radio" name="tank_count" value="5顆"/><span>5 顆</span></label>
        </div>
        <ul><li>放置高危險/狹窄機房請事先告知說明。</li></ul>
      </div>

      <!-- 自來水管清洗服務 -->
      <div class="section">
        <h2>自來水管清洗服務</h2>
        <div class="subhead">戶型方案</div>
        <div class="option-grid">
          <label class="option-card"><input type="radio" name="pipe_service" value="無廚一衛"/><span>無廚一衛</span></label>
          <label class="option-card"><input type="radio" name="pipe_service" value="一廚一衛"/><span>一廚一衛</span></label>
          <label class="option-card"><input type="radio" name="pipe_service" value="一廚兩衛"/><span>一廚兩衛</span></label>
          <label class="option-card"><input type="radio" name="pipe_service" value="一廚三衛"/><span>一廚三衛</span></label>
          <label class="option-card"><input type="radio" name="pipe_service" value="一廚四衛"/><span>一廚四衛</span></label>
          <label class="option-card"><input type="radio" name="pipe_service" value="一廚五衛"/><span>一廚五衛</span></label>
        </div>

        <div class="subhead">清洗原因（可複選）</div>
        <div class="option-grid" id="pipe-reason-group">
          <label class="option-card"><input type="checkbox" name="pipe_reason" value="異味"/><span>出水有異味（如鐵鏽味、霉味）</span></label>
          <label class="option-card"><input type="checkbox" name="pipe_reason" value="混濁"/><span>水質混濁或有顆粒、沉澱物</span></label>
          <label class="option-card"><input type="checkbox" name="pipe_reason" value="水壓變小"/><span>水壓變小或出水量減少</span></label>
          <label class="option-card"><input type="checkbox" name="pipe_reason" value="長時間未清洗"/><span>長時間未清洗過水管（5 年以上）</span></label>
          <label class="option-card"><input type="checkbox" name="pipe_reason" value="新屋"/><span>剛搬新家或新裝修</span></label>
          <label class="option-card"><input type="checkbox" name="pipe_reason" value="健康考量"/><span>家中成員皮膚過敏或健康考量</span></label>
          <label class="option-card"><input type="checkbox" name="pipe_reason" value="預防性保養"/><span>預防性保養清洗</span></label>
          <label class="option-card"><input type="checkbox" name="pipe_reason" value="其他" data-other-id="pipe_reason_other"/><span>其他原因（請說明）</span></label>
          <!-- 其他原因輸入框：不超出邊框，長度適中 -->
          <div class="other-wrap" style="grid-column:1 / -1;">
            <textarea id="pipe_reason_other" class="other-input" placeholder="請輸入其他原因…"></textarea>
          </div>
        </div>
        <ul>
          <li>施工期間需可接入設備，請預留廚房/浴室作業空間。</li>
          <li>若有熱水器/軟水機/淨水器，將暫時關閉進出水與電源。</li>
        </ul>
      </div>

      <!-- 導覽 -->
      <div class="nav">
        <a href="addon-service.html" id="back">返回上一步</a>
        <a href="contact.html" id="next">下一步</a>
      </div>

    </div>
  </div>
</div>

<script>
  (function(){
    const KEY='BOOKING_DATA';
    const $=s=>document.querySelector(s);
    const $$=s=>Array.prototype.slice.call(document.querySelectorAll(s));

    function save(part){
      try{
        const prev = JSON.parse(localStorage.getItem(KEY)||'{}');
        localStorage.setItem(KEY, JSON.stringify(Object.assign(prev, part)));
      }catch(e){}
    }
    function collect(root=document){
      const out={};
      $$('input[name],select[name],textarea[name]', root).forEach(el=>{
        const n=el.name; if(!n) return;
        if(el.type==='checkbox'){
          if(!el.checked) return;
          let v = el.value || '';
          const oid = el.dataset.otherId;
          if(oid){
            const ext = $('#'+oid)?.value?.trim();
            if(ext) v = v + '：' + ext;
          }
          (out[n]||(out[n]=[])).push(v);
        }else if(el.type==='radio'){
          if(!el.checked) return;
          let v = el.value || '';
          const oid = el.dataset.otherId;
          if(oid){
            const ext = $('#'+oid)?.value?.trim();
            if(ext) v = v + '：' + ext;
          }
          out[n]=v;
        }else{
          const v=(el.value||'').trim();
          if(v) out[n]=v;
        }
      });
      return out;
    }

    // === 其他原因輸入框顯示 / 隱藏（不超出邊框、適中大小） ===
    (function(){
      const group = document.getElementById('pipe-reason-group');
      if(!group) return;
      const otherCb = group.querySelector('input[type="checkbox"][data-other-id]');
      const target = document.getElementById(otherCb?.dataset.otherId || '');
      function sync(){
        const checked = !!(otherCb && otherCb.checked);
        if(!target) return;
        if(checked){ target.classList.add('show'); target.style.height='auto'; }
        else{ target.classList.remove('show'); target.value=''; }
      }
      if(otherCb){ otherCb.addEventListener('change', sync); sync(); }
    })();

    // === 卡片選中樣式（radio / checkbox） ===
    (function(){
      document.querySelectorAll('.option-grid').forEach(function(group){
        group.querySelectorAll('input[type="radio"],input[type="checkbox"]').forEach(function(input){
          function refresh(){
            if(input.type==='radio'){
              group.querySelectorAll('label.option-card').forEach(c=>c.classList.remove('selected'));
              const checked = group.querySelector('input[type="radio"]:checked');
              if(checked){ checked.closest('label.option-card')?.classList.add('selected'); }
            }else{
              if(input.checked) input.closest('label.option-card')?.classList.add('selected');
              else input.closest('label.option-card')?.classList.remove('selected');
            }
          }
          input.addEventListener('change', refresh);
          if(input.checked) input.closest('label.option-card')?.classList.add('selected');
        });
      });
    })();

    document.addEventListener('change', ()=> save(collect()));
    ['back','next'].forEach(id=>{
      const a=document.getElementById(id);
      if(a) a.addEventListener('click', ()=> save(collect()), {capture:true});
    });

    // 偵錯
    window.debugOther=()=>collect();
    window.debugLS=()=>JSON.parse(localStorage.getItem(KEY)||'{}');
  })();
</script>

<a class="fab-home" href="index.html" id="fab-home" aria-label="快速回首頁">
  <span class="fab-home__icon">🏠</span>
  <span class="fab-home__label">快速回首頁</span>
</a>

<script>
// 讓點擊 FAB 也會保存表單資料再離開
(function(){
  const fab = document.getElementById('fab-home');
  if(!fab) return;
  fab.addEventListener('click', function(e){
    try{
      const KEY='BOOKING_DATA';
      const $$=s=>Array.prototype.slice.call(document.querySelectorAll(s));
      const out={};
      $$('input[name],select[name],textarea[name]').forEach(el=>{
        const n=el.name; if(!n) return;
        if(el.type==='checkbox'){
          if(!el.checked) return;
          let v = el.value || '';
          const oid = el.dataset.otherId;
          if(oid){
            const ext = document.getElementById(oid)?.value?.trim();
            if(ext) v = v + '：' + ext;
          }
          (out[n]||(out[n]=[])).push(v);
        }else if(el.type==='radio'){
          if(!el.checked) return;
          let v = el.value || '';
          const oid = el.dataset.otherId;
          if(oid){
            const ext = document.getElementById(oid)?.value?.trim();
            if(ext) v = v + '：' + ext;
          }
          out[n]=v;
        }else{
          const v=(el.value||'').trim();
          if(v) out[n]=v;
        }
      });
      const prev = JSON.parse(localStorage.getItem(KEY)||'{}');
      localStorage.setItem(KEY, JSON.stringify(Object.assign(prev, out)));
    }catch(_) {}
    // 不中斷導航，讓連結照常前往首頁
  }, {capture:true});
})();
</script>
</body>
</html>
