
/* Mobile-first enhancements */
:root{
  --brand:#2563eb;
  --ink:#111827;
  --muted:#6b7280;
  --line:#e5e7eb;
  --bg:#ffffff;
  --radius:14px;
}

/* Typography scales with viewport but stays readable */
html{font-size:16px}
@supports (font-size: clamp(1rem, 1vw, 1rem)) {
  h1{font-size:clamp(1.5rem, 4.5vw, 2rem)}
  h2{font-size:clamp(1.2rem, 3.6vw, 1.6rem)}
  h3{font-size:clamp(1.1rem, 3.2vw, 1.3rem)}
  body{font-size:clamp(1rem, 2.9vw, 1.0625rem)}
}

/* Layout */
.container, .wrap, .section, .grid{
  padding-left:16px;
  padding-right:16px;
}
.grid{display:grid;gap:12px}
@media (min-width:720px){
  .grid.cols-2{grid-template-columns:1fr 1fr}
  .grid.cols-3{grid-template-columns:repeat(3,1fr)}
}

/* Images and media */
img, video{max-width:100%;height:auto}

/* Cards */
.card{
  border:1px solid var(--line);
  background:var(--bg);
  border-radius:var(--radius);
  padding:14px;
  box-shadow:0 1px 2px rgba(0,0,0,.04);
}

/* Buttons and inputs: comfortable touch targets */
button, .btn, input[type=submit]{
  min-height:48px;
  padding:0 16px;
  border-radius:12px;
  border:1px solid var(--line);
  background:var(--brand);
  color:#fff;
  font-weight:600;
  line-height:1;
  -webkit-tap-highlight-color:transparent;
}
a.btn{display:inline-flex;align-items:center;justify-content:center;text-decoration:none}

input[type=text], input[type=tel], input[type=email], input[type=date], input[type=time], input[type=number], select, textarea{
  width:100%;
  min-height:48px;
  padding:10px 12px;
  border-radius:12px;
  border:1px solid var(--line);
  background:#fff;
}

/* Form groups space */
.form-row, .field, .form-group{display:grid;gap:8px;margin:10px 0}

/* Sticky primary actions on mobile */
@media (max-width:767px){
  .sticky-cta{
    position:sticky;
    bottom:0;
    display:flex;
    gap:10px;
    padding:10px 16px;
    background:rgba(255,255,255,.96);
    backdrop-filter:saturate(1.2) blur(4px);
    border-top:1px solid var(--line);
    margin-left:-16px;margin-right:-16px;
  }
  .sticky-cta .btn{flex:1}
}

/* Tables: scroll on small screens */
.table-scroll{overflow-x:auto}
.table-scroll table{min-width:560px}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce){
  *{animation-duration:0.01ms !important;animation-iteration-count:1 !important;transition-duration:0.01ms !important;scroll-behavior:auto !important}
}

/* Better focus */
:where(a, button, input, select, textarea):focus-visible{
  outline:3px solid rgba(37,99,235,.6);
  outline-offset:2px;
}

/* Larger checkboxes and radios */
input[type=checkbox], input[type=radio]{width:20px;height:20px}
label{line-height:1.3}

/* Utility helpers */
.hidden-mobile{display:none}
@media (min-width:768px){.hidden-mobile{display:initial} .hidden-desktop{display:none}}


/* Make existing .nav bars mobile-sticky */
@media (max-width:767px){
  .nav{
    position:sticky;
    bottom:0;
    display:flex;
    gap:10px;
    padding:10px 16px;
    background:rgba(255,255,255,.96);
    backdrop-filter:saturate(1.2) blur(4px);
    border-top:1px solid var(--line);
    margin-left:-16px;margin-right:-16px;
  }
  .nav a, .nav button{flex:1; min-height:48px; border:1px solid var(--line); border-radius:12px; text-align:center; padding:12px}
}

/* Make all tables horizontally scrollable on small screens */
@media (max-width:767px){
  table{display:block; overflow-x:auto; white-space:nowrap}
}


/* === Contrast Enhancement Additions === */
body {
  background-color: #ffffff;
  color: #1f2937; /* darker ink */
}

.section, .card {
  background: #f9fafb;
  border: 1px solid #cbd5e1; /* stronger border */
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
}

.option, .group label, label.option {
  padding: 8px 10px;
  border: 1px solid #d1d5db;
  border-radius: 8px;
  background: #f8fafc;
  transition: background .2s, border-color .2s;
}
.option:hover, .group label:hover, label.option:hover {
  background: #e0f2fe; /* light blue on hover */
  border-color: #3b82f6;
}
.option input:checked + label,
.group input:checked + label,
label.option:has(input:checked) {
  background: #dbeafe; /* checked state */
  border-color: #2563eb;
  font-weight: 600;
  color: #1e3a8a;
}

/* Headings more prominent */
h1, h2, h3 {
  color: #1e3a8a;
  font-weight: 700;
}
p, label, span {
  color: #374151;
}



/* === UX Enhancements (non-breaking) === */

/* Color system */
:root{
  --ink:#1f2937;           /* text */
  --ink-weak:#374151;
  --brand:#2563eb;         /* primary */
  --brand-600:#1d4ed8;
  --muted:#64748b;
  --bg-soft:#f9fafb;
  --line:#cbd5e1;
  --accent:#e0f2fe;
  --accent-strong:#dbeafe;
  --error:#dc2626;
  --ok:#16a34a;
}

/* Typography & spacing */
html{scroll-behavior:smooth;}
body{color:var(--ink);line-height:1.6;}
h1,h2,h3{color:#1e3a8a;font-weight:700;line-height:1.3;}
.wrap, .container{gap:16px}
.section, .card{background:var(--bg-soft);border:1px solid var(--line);border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,.06);padding:12px}

/* Options (radio/checkbox) */
label.option, .option, .group label{
  display:block;padding:10px 12px;border:1px solid #d1d5db;border-radius:10px;background:#f8fafc;
  transition:background .2s,border-color .2s, box-shadow .2s;
  margin:8px 0;
}
label.option:hover, .option:hover, .group label:hover{background:var(--accent);border-color:#3b82f6}
input[type="radio"],input[type="checkbox"]{accent-color:var(--brand)}
/* checked visual when structure is input + label */
input:checked + label.option{background:var(--accent-strong);border-color:var(--brand);box-shadow:0 0 0 2px rgba(37,99,235,.15) inset;color:#1e3a8a;font-weight:600}

/* Live validation */
.input-msg{font-size:.85rem;margin-top:4px}
.is-invalid{border-color:var(--error)!important;box-shadow:0 0 0 2px rgba(220,38,38,.12)}
.is-valid{border-color:var(--ok)!important;box-shadow:0 0 0 2px rgba(22,163,74,.12)}

/* Sticky CTA bar */
.nav{gap:8px}
.nav.sticky{
  position:sticky;bottom:0;z-index:40;background:#fff;padding:10px 12px;
  border-top:1px solid var(--line);
}
@media (max-width: 768px){
  .nav{position:sticky;bottom:0;background:#fff;padding:10px 12px;border-top:1px solid var(--line)}
  .nav a,.nav button{min-height:48px}
}

/* Buttons */
.nav a, .nav button, button, .btn{
  padding:10px 16px;border-radius:10px;border:1px solid var(--line);
  background:#ffffff;cursor:pointer;font-size:1rem
}
.nav a:hover, .nav button:hover, button:hover, .btn:hover{background:#f3f4f6}
.btn-primary{background:var(--brand);color:#fff;border-color:var(--brand)}
.btn-primary:hover{background:var(--brand-600)}

/* Bigger touch zones */
input, select, textarea{min-height:44px;padding:10px 12px;border-radius:10px;border:1px solid var(--line)}
label{display:block;margin:8px 0 4px 0;color:var(--ink-weak)}

/* autosave banner removed */


/* === Button Style Fix === */
.nav a, .nav button, button, .btn {
  background: #2563eb;
  color: #ffffff;
  border-color: #2563eb;
  font-weight: 600;
}
.nav a:hover, .nav button:hover, button:hover, .btn:hover {
  background: #1d4ed8;
  border-color: #1d4ed8;
  color: #ffffff;
}



/* === Mobile Layout Cleanup (non-breaking) === */
.section, .card {
  background: var(--bg-soft, #f9fafb);
  border: 1px solid var(--line, #cbd5e1);
  border-radius: 14px;
  padding: 14px;
  margin: 12px 0;
}
.section > h2, .card > h2 { font-size: 1.1rem; font-weight: 800; margin: 2px 0 10px; }
label { display:block; margin: 8px 2px 6px; font-weight: 600; color: var(--ink-weak,#374151); }
input, select, textarea {
  width: 100%; min-height: 48px; border-radius: 12px; border: 1px solid var(--line,#cbd5e1);
  padding: 10px 12px; box-sizing: border-box;
}
.group { display: grid; grid-template-columns: 1fr; gap: 10px; }
@media (min-width: 420px){ .group { grid-template-columns: repeat(2, 1fr); } }
@media (min-width: 768px){ .group { grid-template-columns: repeat(3, 1fr); } }
.group label, label.option, .option {
  display: flex; align-items: center; gap: 10px; padding: 12px;
  background: #f8fafc; border: 1px solid #d1d5db; border-radius: 12px; min-height: 48px; line-height: 1.3;
}
.group label:hover, label.option:hover, .option:hover { background: var(--accent,#e0f2fe); border-color: #3b82f6; }
input[type="radio"]:checked + label, input[type="checkbox"]:checked + label {
  background: var(--accent-strong,#dbeafe); border-color: #2563eb; color: #1e3a8a; font-weight: 700;
}
input[type="radio"], input[type="checkbox"] { width: 20px; height: 20px; accent-color: #2563eb; flex: 0 0 auto; }
#back { background: #e5e7eb !important; color: #111827 !important; border-color: #e5e7eb !important; }
#back:hover { background: #d1d5db !important; }
.nav.sticky { box-shadow: 0 -4px 10px rgba(0,0,0,.06); }
body { padding-bottom: 88px; }
#preview { font-size: .95rem; }
#preview td, #preview th { padding: 8px 10px; }


/* === Stack schedule & preview vertically on small screens === */
@media (max-width: 768px){
  .grid{ grid-template-columns: 1fr !important; }
}


/* === Mobile compact for schedule page === */
#timeslot {
  display: grid !important;
  grid-template-columns: repeat(2, 1fr) !important;
  gap: 10px !important;
}
#timeslot > label { margin: 0 !important; } /* tighter cards */
#timeslot > #time_other {
  grid-column: 1 / -1; /* span full width for custom time input */
}

/* Collapsible preview styles */
.preview-collapsible {
  border: 1px solid var(--line, #cbd5e1);
  border-radius: 12px;
  background: #fff;
  margin-top: 12px;
}
.preview-collapsible summary {
  list-style: none;
  cursor: pointer;
  padding: 12px 14px;
  font-weight: 800;
  color: var(--ink, #1f2937);
  display: flex; align-items: center; justify-content: space-between;
}
.preview-collapsible summary::after {
  content: '展開';
  font-weight: 600;
  color: var(--muted, #64748b);
}
.preview-collapsible[open] summary::after { content: '收合'; }
.preview-collapsible .inner {
  padding: 0 14px 12px;
}
@media (max-width: 768px){
  /* smaller table on phones */
  #preview { font-size: .9rem; }
  #preview td, #preview th { padding: 6px 8px; }
}

/* === Layout alignment & overflow fixes === */
html, body { margin:0; padding:0; overflow-x:hidden; }
.wrap, .container, main { width:100%; max-width:1024px; margin:0 auto; box-sizing:border-box; }
.grid, .section, .card { width:100%; box-sizing:border-box; }


/* === Overflow & Right-Shift Fix (mobile-first) === */
*,
*::before,
*::after { box-sizing: border-box; }

html, body { margin: 0; padding: 0; overflow-x: hidden; }

.wrap, .container, main {
  width: 100% !important;
  max-width: 1024px;
  margin: 0 auto;
  padding-left: 16px;
  padding-right: 16px;
  box-sizing: border-box !important;
}

.grid, .section, .card {
  width: 100% !important;
  max-width: 100% !important;
  overflow-x: hidden !important;
  box-sizing: border-box !important;
}

img, video, canvas, iframe {
  max-width: 100%;
  height: auto;
  display: block;
}

input, select, textarea, button {
  max-width: 100%;
  box-sizing: border-box;
}

table {
  width: 100% !important;
  table-layout: fixed;
  border-collapse: collapse;
  word-break: break-word;
  overflow-wrap: anywhere;
}

/* Sticky bar should not cause horizontal overflow */
.nav, .nav.sticky {
  width: 100% !important;
  max-width: 100% !important;
  left: 0; right: 0;
  box-sizing: border-box;
}
.nav > * {
  min-width: 0; /* allow buttons to shrink within flex container */
}

/* Prevent accidental negative margins from pushing layout */
body * {
  margin-left: clamp(-0.01px, 0vw, 0px);
}


/* === Force two-column card layout for contact.html sections === */
#contact-methods, #residence-type, #contact-time {
  display: grid !important;
  grid-template-columns: repeat(2, 1fr) !important;
  gap: 10px !important;
}
#contact-methods > label,
#residence-type > label,
#contact-time > label {
  margin: 0 !important;
}
